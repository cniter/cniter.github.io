const requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||window.clearTimeout,range=t=>new Array(t).fill(0).map((t,e)=>e),canvasStyle=t=>`display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:${t.zIndex};opacity:`+t.opacity;class CanvasNest{constructor(t,e){this.el=t,this.c={zIndex:-1,opacity:.5,color:"0,0,0",pointColor:"0,0,0",count:99,...e},this.canvas=this.newCanvas(),this.context=this.canvas.getContext("2d"),this.points=this.randomPoints(),this.current={x:null,y:null,max:2e4},this.all=this.points.concat([this.current]),this.bindEvent(),this.requestFrame(this.drawCanvas)}bindEvent(){window.onresize=t=>{this.canvas.width=this.el.clientWidth,this.canvas.height=this.el.clientHeight},this.onmousemove=window.onmousemove,window.onmousemove=t=>{this.current.x=t.clientX,this.current.y=t.clientY,this.onmousemove&&this.onmousemove(t)},this.onmouseout=window.onmouseout,window.onmouseout=()=>{this.current.x=null,this.current.y=null,this.onmouseout&&this.onmouseout()}}randomPoints=()=>range(this.c.count).map(()=>({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,xa:2*Math.random()-1,ya:2*Math.random()-1,max:6e3}));newCanvas(){"static"===getComputedStyle(this.el).position&&(this.el.style.position="relative");const t=document.createElement("canvas");return t.style.cssText=canvasStyle(this.c),t.width=this.el.clientWidth,t.height=this.el.clientHeight,this.el.appendChild(t),t}requestFrame(t){this.tid=requestAnimationFrame(()=>t.call(this))}drawCanvas(){const i=this.context,n=this.canvas.width,o=this.canvas.height,s=this.current,t=this.points,a=this.all;i.clearRect(0,0,n,o);let h,m,r,l,c,u;t.forEach((t,e)=>{for(t.x+=t.xa/3,t.y+=t.ya/3,t.xa*=t.x>n||t.x<0?-1:1,t.ya*=t.y>o||t.y<0?-1:1,i.fillStyle=`rgba(${this.c.pointColor})`,i.fillRect(t.x-1.5,t.y-1.5,3,3),m=e+1;m<a.length;m++)h=a[m],null!==h.x&&null!==h.y&&(l=t.x-h.x,c=t.y-h.y,u=l*l+c*c,u<h.max&&(h===s&&u>=h.max/2&&(t.x-=.03*l,t.y-=.03*c),r=(h.max-u)/h.max,i.beginPath(),i.lineWidth=1.5*r,i.strokeStyle=`rgba(${this.c.color},${.2+r})`,i.moveTo(t.x,t.y),i.lineTo(h.x,h.y),i.stroke()))}),this.requestFrame(this.drawCanvas)}destroy(){window.onmousemove=this.onmousemove,window.onmouseout=this.onmouseout,cancelAnimationFrame(this.tid),this.canvas.parentNode.removeChild(this.canvas)}}