<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Shaun&#39;s Space</title><meta name="description" content="Shaun之所见所学所想所得"><link rel="icon" href="/img/favicon.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.5/css/fork-awesome.min.css" integrity="sha256-P64qV9gULPHiZTdrS1nM59toStkgjM0dsf5mK/UwBV4=" crossorigin="anonymous"><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha256-ZvOgfh+ptkpoa2Y4HkRY28ir89u/+VRyDE7sB7hEEcI=" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js" integrity="sha256-EPrkNjGEmCWyazb3A/Epj+W7Qm2pB9vnfXw+X6LImPM=" crossorigin="anonymous"></script><script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.css" integrity="sha512-0hsIlRjJbiUWaKMhXXNDmjWI2qPvUlhNBLHMhqeF5jIma+bedec27N5FoT2JEeHz5TUmOGCsm1Y89EsX/P0wOg==" crossorigin="anonymous" referrerpolicy="no-referrer"><script src="//cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js" integrity="sha512-EcTCcXV46teiNwe0VcnM5A038tcY+BaQYO4nW6Gh2i7v4/HjBVg7xx3+JBLl9WofDds//INJAiEGAtdgr8PWyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" href="/css/style.css"><style>body{cursor:url(/img/cursor/normal.cur),auto}#navbar-toggler--btn,.code-copy,.copy-path,a,button{cursor:url(/img/cursor/link.cur),auto}#site-bg{position:fixed;left:0;top:0;width:100%;height:100%;z-index:-1;background-image:url(/img/site-bg/bg-3.jpg);background-repeat:no-repeat;background-size:100% 100%;opacity:.2}</style><script>const bdshareURL="/plugins/baidushare/"</script><script async type="text/javascript" src="/js/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Shaun's Space" type="application/atom+xml">
</head><body><!--[if lt IE 9]>
        <link rel="stylesheet" href="/css/ie9.css">
        <div class="alert alert-danger topframe" role="alert">
            嘿，朋友！您的浏览器已<strong>过期</strong>，不建议继续食用。
            <a target="_blank" class="alert-link" href="http://browsehappy.com">这里</a> 有些新玩意儿，何不试试？
        </div>
    <![endif]--><header id="header"><nav id="navbar" class="navbar navbar-expand-md"><div class="container"><h1 id="site-title"><a href="/" class="navbar-brand"><img src="/img/favicon.png"> <span>Shaun&#39;s Space</span></a></h1><button id="navbar-toggler--btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar"><span><i class="fa fa-list-ul" aria-hidden="true"></i></span></button><div class="collapse navbar-collapse" id="collapsibleNavbar"><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="/" title="首页" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-home"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives" title="所有文章" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-archive"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories" title="全部分类" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-folder"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags" title="全部标签" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-tags"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about" title="关于本站" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-user"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/guide" title="Treasure Guide" data-toggle="tooltip" data-placement="bottom"><i class="nav-icon fa fa-university"></i> 导航</a></li></ul></div></div></nav></header><div class="container"><div class="row"><aside id="left-col" class="col-md-1"></aside><main class="col-lg-8 col-sm-12"><div id="site-bg"></div><article id="post-hexo-theme-chi主题更新小记" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/26d437be.html"><time datetime="2019-04-06T09:02:39.000Z">2019-04-06</time></a></span><section class="article-title article-title--index"><a href="/posts/26d437be.html">hexo-theme-chi主题更新小记</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color3 article-category-link" href="/categories/%E5%BB%BA%E7%AB%99%E5%B0%8F%E8%AE%B0/">建站小记</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color2 article-tag-none-link" href="/tags/hexo/" rel="tag">hexo</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　Chi 主题的大体结构功能算是写完了，但是还有一些个性化的东西需要添加，所以以后有关于 Chi 主题更新的部分就都写在这里吧。但是由于是 Shaun 个性化定制的一些东西，所以如果不是大 Bug 或大优化的更新，一般就不进 <a target="_blank" rel="noopener" href="https://github.com/cniter/hexo-theme-chi">Chi 主题仓库</a> 中了。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　Chi 主题的大体结构功能算是写完了，但是还有一些个性化的东西需要添加，所以以后有关于 Chi 主题更新的部分就都写在这里吧。但是由于是 Shaun 个性化定制的一些东西，所以如果不是大 Bug 或大优化的更新，一般就不进 <a target="_blank" rel="noopener" href="https://github.com/cniter/hexo-theme-chi">Chi 主题仓库</a> 中了。</p><span id="more"></span><h2 id="功能篇">功能篇</h2><h3 id="脚注提示功能">1. 脚注提示功能</h3><p><strong>功能描述：</strong> 鼠标悬停在脚注上即可显示对应脚注内容。 Shaun 的脚注由于是采用 pandoc 渲染的，所以也是属于个性化定制，就不将这个功能放进 Chi 主题仓库中了。</p><p><strong>解决方案：</strong> 还是利用 Bootstrap 的 tooltip 提示插件，具体实现代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JAVASCRIPT"><div class="code-copy"></div><figure class="highlight hljs javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;a.footnote-ref&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, elem</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> post_id = $(<span class="built_in">this</span>).parents(<span class="string">&#x27;article&#x27;</span>).attr(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> fn_href = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;href&#x27;</span>);</span><br><span class="line">    elem.setAttribute(<span class="string">&#x27;data-toggle&#x27;</span>, <span class="string">&#x27;tooltip&#x27;</span>);</span><br><span class="line">    elem.setAttribute(<span class="string">&#x27;data-html&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span><br><span class="line">    elem.setAttribute(<span class="string">&#x27;title&#x27;</span>, $(<span class="string">&quot;#&quot;</span> + post_id + <span class="string">&quot; &quot;</span> + fn_href).html());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>遍历脚注，先获取文章 id，再获取对应文章下的对应脚注内容，使用 tooltip 提示。</p><h2 id="bug-篇">Bug 篇</h2><h3 id="图片没居中">1. 图片没居中</h3><p><strong>问题描述：</strong> 上次那篇翻译的文章有几张图片，在放置的时候发现图片没有居中，查看代码后发现居中样式没写，但由于其图片标签 <code>&lt;img&gt;</code> 是放在一个 <code>&lt;figure&gt;</code> 标签中，由于不确定是不是 pandoc 渲染的问题，所以就没将这个修正放进 Chi 主题仓库中了。</p><p><strong>解决办法：</strong> 在 <code>style.styl</code> 文件中添加样式：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="CSS"><div class="code-copy"></div><figure class="highlight hljs css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">figure</span> &#123;</span><br><span class="line">	<span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>即可让图片居中。</p><h2 id="动画篇">动画篇</h2><h3 id="鼠标跟随动画">1. 鼠标跟随动画</h3><p>　　其实一直都想把『奥日与黑暗森林』中的鼠标轨迹特效移植过来，但是苦于水平有限，一直没法做到，恰好 19 年 StackOverflow 的愚人节彩蛋中有个鼠标跟随动画很有意思，有好事者还专门将该彩蛋做了个脚本：<a target="_blank" rel="noopener" href="https://meta.stackexchange.com/questions/326037/will-there-be-an-option-to-permanently-keep-this-years-april-fools-design-activ">Will there be an option to permanently keep this year's April Fools design active?</a> 。查看代码，知道实现原理后，发现用 jQuery 和 CSS3 实现一个类似的效果也不算很难，于是 Shaun 就尝试做了一下，并简单的美化了一下，感觉效果还行，就加到自己的个性化主题上了。至于在 Chrome 中的小尾巴和 Firefox 中的卡顿现象，是 Shaun 故意的，因为 Shaun 觉得这个小尾巴很有意思，从这个动画看，Chrome 确实比 Firefox 要流畅一点。最终实现代码如下：</p><p>css 代码：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="CSS"><div class="code-copy"></div><figure class="highlight hljs css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cursor-trail--item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    touch-action: none;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9999999</span>;</span><br><span class="line">    will-change: transform;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">186</span>, <span class="number">227</span>, <span class="number">240</span>, <span class="number">0.1</span>);</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#6CC2F8</span>;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: cursorTrail <span class="number">0.9s</span> ease;</span><br><span class="line">    <span class="attribute">animation</span>: cursorTrail <span class="number">0.9s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> cursorTrail &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">20%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3D</span>(<span class="number">0</span>, -<span class="number">20px</span>, <span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>js 代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JAVASCRIPT"><div class="code-copy"></div><figure class="highlight hljs javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).on(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.time &amp;&amp; (<span class="built_in">Date</span>.now() - <span class="built_in">this</span>.time) &lt; <span class="number">16</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.time = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">let</span> trail_character = <span class="string">&#x27;•&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> mouse_x = e.originalEvent.x || e.originalEvent.layerX || <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">let</span> mouse_y = e.originalEvent.y || e.originalEvent.layerY || <span class="number">0</span>;</span><br><span class="line">    mouse_x = mouse_x + <span class="number">20</span>;</span><br><span class="line">    mouse_y = mouse_y + <span class="number">26</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;#cursor-trail&#x27;</span>).append(</span><br><span class="line">        <span class="string">&#x27;&lt;span class=&quot;cursor-trail--item&quot; style=&quot;left:&#x27;</span> </span><br><span class="line">        + mouse_x </span><br><span class="line">        + <span class="string">&#x27;px;top:&#x27;</span> </span><br><span class="line">        + mouse_y </span><br><span class="line">        + <span class="string">&#x27;px;&quot;&gt;&#x27;</span> </span><br><span class="line">        + trail_character </span><br><span class="line">        + <span class="string">&#x27;&lt;/span&gt;&#x27;</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;.cursor-trail--item&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> item = $(<span class="built_in">this</span>);</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">            $(item).remove(); </span><br><span class="line">        &#125;, <span class="number">900</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>若不要小尾巴，则只需要将移除元素的时间改快一点就行了，除开上面的代码，还需要在 html 页面中添加一个元素 <code>&lt;span id="cursor-trail"&gt;&lt;/span&gt;</code> 。</p><h3 id="点击波纹">2. 点击波纹</h3><p>　　一次偶然的机会，看到一篇这样的文章：<a target="_blank" rel="noopener" href="https://juejin.im/post/5ba5ab8ce51d450e7762cca5">还原一个 Windows 10 Metro 布局</a> 。感觉其中的点击波纹动画很有意思，Shaun 决定把这个动画也放进自己的个性化主题中。至于代码就不贴了，毕竟就是上面文章提供的代码，只是用这个动画的时候发现了 Chrome 的一个问题，就是在进行模糊动画的时候会出现正方形的右边框和下边框，单个模糊不进行动画，不会有边框，进行动画但没模糊也不会有边框，两个同时一起就会出现问题，Firefox 没有这个问题，但 Firefox 存在另一个问题，就是鼠标快速连点的时候，鼠标跟随动画可能会出现问题。浏览器的问题 Shaun 暂时没法解决了，就先这样吧 ╮(╯▽╰)╭。虽然对 Chrome 为啥会出现这样的问题有些猜想，但还是不说出来丢人了，万一不是 Shaun 想的这样就尴尬了 ,,ԾㅂԾ,, 。</p><h2 id="后记">后记</h2><p>有更新再继续更新吧。</p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-［译］为什么深度学习没有取代传统的计算机视觉" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/3578e309.html"><time datetime="2019-03-26T04:50:28.000Z">2019-03-26</time></a></span><section class="article-title article-title--index"><a href="/posts/3578e309.html">［译］为什么深度学习没有取代传统的计算机视觉</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color2 article-category-link" href="/categories/Share/">Share</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color4 article-tag-none-link" href="/tags/cv/" rel="tag">cv</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　这是一篇<strong>译文</strong>，译自：<a target="_blank" rel="noopener" href="http://zbigatron.com/has-deep-learning-superseded-traditional-computer-vision-techniques/?spm=a2c4e.11153940.blogcont543029.21.3ec3c1c3DsQmF2">Why Deep Learning Has Not Superseded Traditional Computer Vision</a>，原作者为：<a target="_blank" rel="noopener" href="http://zbigatron.com/author/zbigatron/">Zbigatron</a> 。Shaun 水平有限，仅供参考学习，更多内容还请自行查看原文。</p><p>至于为什么要翻译这篇文章，算是回答别人的一个问题吧。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　这是一篇<strong>译文</strong>，译自：<a target="_blank" rel="noopener" href="http://zbigatron.com/has-deep-learning-superseded-traditional-computer-vision-techniques/?spm=a2c4e.11153940.blogcont543029.21.3ec3c1c3DsQmF2">Why Deep Learning Has Not Superseded Traditional Computer Vision</a>，原作者为：<a target="_blank" rel="noopener" href="http://zbigatron.com/author/zbigatron/">Zbigatron</a> 。Shaun 水平有限，仅供参考学习，更多内容还请自行查看原文。</p><p>至于为什么要翻译这篇文章，算是回答别人的一个问题吧。</p><span id="more"></span><h2 id="为什么深度学习还没有取代传统的计算机视觉">为什么深度学习还没有取代传统的计算机视觉？</h2><figure><img src="http://zbigatron.com/wp-content/uploads/2018/01/scale-done_small.jpg" alt="scale-cv-dl"><figcaption aria-hidden="true">scale-cv-dl</figcaption></figure><p>　　编写这篇文章的原因是在论坛中经常有人问：深度学习是否取代了传统的计算机视觉？或者类似的问题：深度学习效果这么好，还有继续研究传统计算机视觉的必要？</p><p>　　这是个好问题，深度学习（DL）确实彻底改变了计算机视觉（CV）和人工智能，许多曾经看起来不可能解决的问题都解决了，甚至达到了 <a target="_blank" rel="noopener" href="https://www.theguardian.com/global/2015/may/13/baidu-minwa-supercomputer-better-than-humans-recognising-images">机器的结果比人类更好</a> 的程度，比如图像分类。正如 <a target="_blank" rel="noopener" href="http://zbigatron.com/the-reasons-behind-the-recent-growth-of-computer-vision/">我之前讨论的</a>，<strong>深度学习确实为计算机视觉做了很大的贡献</strong>。</p><p>　　但是深度学习只是计算机视觉的一个工具，并不是解决所有问题的万能药，所以，在这篇文章中，<strong>我想详细说明一下为什么传统的计算机视觉仍然非常有用</strong>，并且应该继续学习。</p><p>这篇文章主要有一下几个观点：</p><ul><li>深度学习需要大量数据；</li><li>深度学习有时大材小用了；</li><li>传统的计算机视觉可以辅助深度学习。</li></ul><p>　　但是在我开始讨论这些观点之前，需要先解释一下什么是传统的计算机视觉，什么是深度学习，以及深度学习为何这么 dio。</p><h3 id="背景知识">背景知识</h3><p>　　在深度学习之前，如果要实现图像分类这样的功能，需要首先进行 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Feature_extraction">特征提取</a>。特征即为图像中的信息块，能代表图像的部分信息，可以通过 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Edge_detection">边缘检测</a>，<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Corner_detection">角点检测</a>，<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Object_detection">物体检测</a> 等技术来提取特征。</p><p>　　在进行特征提取和图像分类之类的工作时，一个想法是从一类对象（例如椅子，马等）的图像中提取尽可能多的特征，并将这些特征视为对象的一种定义（比如 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bag-of-words_model_in_computer_vision">词袋模型</a>），然后在其他图像中查找这些定义，若另一个图像中的特征和定义的特征很相似，则该图像可能包含该特定的对象（如椅子，马等）。</p><p>　　在图像分类中，这种特征提取的难点在于<strong>每个图像都必须选择哪些特征进行查找</strong>，当需要分类的类别开始增加时，比如 10 或 20 种类别，这种方式将变得很麻烦以至于不可能实现。当然也可以考虑角点、边缘和纹理信息，使用不同的特征可以更好的描述不同类别的对象，但是如果选择使用很多特征，则必须处理大量参数，所有这些参数都必须微调。</p><p>　　深度学习中有一个<strong>端到端学习</strong>的概念，其含义为告诉机器要针对每个特定类别对象<strong>学习</strong>需要查找的特征，它为每个对象设计了最具描述性和显著性的特征，换言之，<strong>告诉神经网络要发现图像中每个类别的基本模式</strong>。</p><p>　　因此，通过端到端学习，不需要再决定使用哪种传统的计算机视觉技术来描述特征，机器自动选择好了，<a target="_blank" rel="noopener" href="https://www.wired.com/2016/05/the-end-of-code/">Wired magazine</a> 说过：</p><blockquote><p>如果想教一个神经网络识别一只猫，不需要让它寻找胡须、耳朵、皮毛和眼睛，只需要给它大量猫的图像，它就会自动识别猫，若它将狐狸错认成猫，不需要重写代码，只需要继续训练即可。</p></blockquote><p>下图表示了特征提取（使用传统计算机视觉）和端到端学习之间的差异：</p><figure><img src="http://zbigatron.com/wp-content/uploads/2018/03/Screen-Shot-2018-03-16-at-3.06.48-PM.png" alt="traditional-cv-and-dl"><figcaption aria-hidden="true">traditional-cv-and-dl</figcaption></figure><p>　　以上就是需要的背景知识，下面开始深入探讨为什么传统的计算机视觉仍然有存在的必要。</p><h3 id="深度学习需要大量数据">深度学习需要大量数据</h3><p>　　首先，深度学习需要大量的数据，那些著名的图像分类模型就是在海量数据集上训练的，训练数据集中最大的三个是：</p><ul><li><a target="_blank" rel="noopener" href="http://www.image-net.org/">ImageNet</a> – <strong>150 万张图片</strong>，包含有 1000 个对象类别；</li><li><a target="_blank" rel="noopener" href="http://cocodataset.org/">Microsoft Common Objects in Context</a> (COCO) – <strong>250 万张图片</strong>，91 个对象类别；</li><li><a target="_blank" rel="noopener" href="http://host.robots.ox.ac.uk/pascal/VOC/">PASCAL VOC Dataset</a> – <strong>50 万张图片</strong>，20 个对象类别。</li></ul><p>　　一般的图像分类任务不需要这么多图片，但仍然需要很多，如果没办法获得这么多图片怎么办？我们还是得训练我们所有的数据（有些方法可以增多我们的训练数据，但这些都是人工方法）。但是，没有足够的数据支持，训练出来的模型可能会在训练集之外表现不好，因为机器没有洞察能力，无法对没有的数据进行分类。而且无法直观查看训练好的模型并手动调整里面的数据，因为<strong>深度学习模型里面有数百万个参数</strong>，并且这些参数在训练时会自动微调，某种程度上，深度学习模型就是一个黑盒子。</p><p>　　传统的计算机视觉完全透明，可以很清楚的判断自己的解决方案在训练数据之外是否可行，而且<strong>可以深入了解算法中存在的问题</strong>。如果有没法解决的问题，也可以更容易的找出原因并调整。</p><h3 id="深度学习有时大材小用了">深度学习有时大材小用了</h3><p>　　这可能是我支持传统计算机视觉技术研究的最佳理由。</p><p>　　训练深度神经网络需要很长时间，而且需要专门的硬件（高性能 GPU），如果想在普通的笔记本上训练最先进的图像分类模型，可以去外面玩一个星期，回来之后应该还没训练完 ：) 。而且，如果训练好的模型表现不好怎么办？必须调整训练参数并重新开始训练，这个过程有时会重复数百次。</p><p>　　但有时候使用深度学习是完全没有必要的，因为<strong>有时传统的计算机视觉技术可以比深度学习更有效的解决问题并且代码更少</strong>。比如，我曾经做过一个项目来检测传送带上每个罐头是否都有红色的勺子，解决这个问题可以训练深度神经网络来检测勺子，也可以针对红色编写一个简单的阈值分割算法（红色的某个范围内的像素点为白色，其它像素点为黑色），然后计算有多少个白色像素点，后者明显简单的多，一个小时就完成了。</p><p>　　<strong>了解传统的计算机视觉有时会节省大量时间和避免不必要的麻烦</strong>。</p><h3 id="传统计算机视觉提高改进深度学习技能">传统计算机视觉提高改进深度学习技能</h3><p>　　了解传统的计算机视觉可以帮助我们更好地进行深度学习。</p><p>　　例如，计算机视觉中使用的最常见的神经网络是卷积神经网络。但什么是卷积？它实际上是一种广泛使用的图像处理技术（例如 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Sobel_operator">Sobel边缘检测</a>）。了解这一点可以帮助我们了解神经网络正在做什么，并因此可以更好的设计和调整神经网络来解决问题。</p><p>　　深度学习中还可以对图像进行<strong>预处理</strong>，所谓的预处理是指对训练的数据进行一定的处理（Shaun 注：比如图像增强，图像去噪等），这些预处理操作一般由传统的计算机视觉技术完成，比如：当没有足够的训练数据时，可以使用一种叫<strong>数据增强</strong>的技术，使用数据增强让图像进行旋转，平移，裁剪等操作，从而增加“新”图像，通过执行这些操作，可以成倍的增加训练数据集。</p><h3 id="总结">总结</h3><p>　　在这篇文章中，我解释了为什么深度学习还没有取代传统的计算机视觉技术，因此还需要研究后者。首先我发现了深度学习要想表现的足够好需要大量数据的问题，有时候没法获得大量数据，这时只能用传统计算机视觉技术代替；其次，对于特定的任务，使用深度学习可能大材小用了，传统计算机视觉有时比深度学习更有效且代码量也更少；最后了解传统的计算机视觉可以更好的学习深度学习，因为这可以使我们更好的了解深度学习的内部机制，并且可以使用某些预处理操作来改善深度学习结果。</p><p>　　简而言之，深度学习只是计算机视觉的一个工具，不是万能药，不要只是因为它现在很流行所以使用它，传统的计算机视觉技术仍然十分有用，了解它可以节省时间和避免许多麻烦。</p><h2 id="后记">后记</h2><p>　　翻译这篇文章的原因在于，因为某些原因，Shaun 不得不回答一个 “为什么不用深度学习？” 的问题，虽然这里面有极大的因素是客观原因（设备不够 ╮(╯▽╰)╭），但 Shaun 不能明说，正好在网上看到这篇文章，加上也看到过一个问题（类似于 “既然已经能用深度学习做高层次的工作，为何还要用深度学习做底层的工作？”，比如深度学习能做全景分割（可以说是基本完成了图像理解），为何还要做目标检测，图像分割），预计以后有很大的概率也会被问到，所以就需要借用文中的一些观点来进行回答。至于为啥还要用深度学习做底层的工作，可以这样认为，如果用深度学习做底层工作效果不错的话，应该可以对上层工作进行一些辅助，并且可以为上层工作的做法提供一些新的思路。</p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-hexo-theme-chi主题开发小记" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/ac4679b5.html"><time datetime="2019-02-20T10:53:49.000Z">2019-02-20</time></a></span><section class="article-title article-title--index"><a href="/posts/ac4679b5.html">hexo-theme-chi主题开发小记</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color3 article-category-link" href="/categories/%E5%BB%BA%E7%AB%99%E5%B0%8F%E8%AE%B0/">建站小记</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color1 article-tag-none-link" href="/tags/hexo/" rel="tag">hexo</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　2019 年 2 月 20 日，Shaun 的站点主题终于完成了，终于能用上自己的主题了，开心 ～(￣▽￣～)。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　2019 年 2 月 20 日，Shaun 的站点主题终于完成了，终于能用上自己的主题了，开心 ～(￣▽￣～)。</p><span id="more"></span><p>　　在网上看到的建议都是多写内容少整主题，但强迫症表示受不了，Shaun 就是想要一个自己的主题，自己怎么看着舒服就怎么来，即使没有一个访客，至少也要让自己看着舒服，自己想怎么设计就怎么设计，想用什么技术就用什么技术，想怎么排版就怎么排版，尽量少受写约束，总而言之，Shaun 喜欢自由。</p><h2 id="回顾篇">回顾篇</h2><p>　　自己写主题的想法由来已久，应该是从 17 年 12 月份开始的吧，当时就感觉自己魔改的 spfk_x 主题只能勉强符合自己的需求，但是因为已经用的是别人已经完成的框架，大体框架也不好做太多修改（如果要改的话还不如自己重新写一个），而且里面由于经手太多人的修改，里面的代码结构在 Shaun 看起来有点混乱，而且有很多冗余的代码，有些代码甚至完全没有用上，导致修改起来有点麻烦。</p><p>　　至于为什么不在 17 年寒假期间就开始写，而要拖到 18 年 12 月份才开始动手，一部分原因是 Shaun 的拖延症，一部分原因是还没具体想好该怎么布局，该用什么技术，还有一部分就是外在客观原因了。</p><p>　　18 年 12 月份开始动手写，是因为这段时间稍显空闲，虽然白天还是一样的忙，但至少没那么多心里负担了，而且此时 Shaun 对于自己想要的大体布局已经十分清楚了（虽然一些具体细节还没不是那么清楚），所以就趁着晚上有时间写写，有时候晚上高兴或没事干就写写，有时候没想法或还没想好具体怎么实现就不写，就这样断断续续的写，总算在 19 年 2 月完成了。</p><p>　　本来想在 19 年之前完成的，可是由于本人的拖延症和一些客观原因，还是超期了很久，侯世达定律总是存在的（ sigh~😔），不过总的开发时间也差不多是一个月吧。感觉花费这一个月的晚上时间还是挺值得的，虽然从中学到的东西不多，但总算也有点自己的东西了。</p><h2 id="实现篇">实现篇</h2><p>　　既然要开始写主题了，首先当然要想一个主题名字，本来最初是直接取原来主题的首尾字母作为名字，但后面想了想感觉有点不对劲，有点骂人的意味在里面 (´ ; ω ; `)，后面又想了想，就用尾字母 X 算了，反正站点图标也是那个，后面感觉还是不好，单字母太单一了，后面突然想到希腊字母，就以希腊字母的英语命名了。</p><p>　　名字想好之后，就要决定用什么技术了，由于 Shaun 只是一个前端小白，无论用什么技术对 Shaun 来说难度都差不多，Shaun 理想的主题是能够支持响应式的，所以为了尽可能简单的支持响应式，CSS 方面的库就采用 Bootstrap4，CSS 预处理器当然是用 Stylus 了， JS 方面最令 Shaun 纠结，到底是采用现代的 Vue 还是传统的 jQuery，最终从相对熟悉程度和相关资料广度方面考虑，Shaun 最终选择了 jQuery3（以后有机会再尝试一下 Vue 吧），接下来要选择的是 Node.js 模板引擎，候选的主要有三个 EJS、Swig 和 Jade（现已更名Pug），Shaun 原来的主题是用 EJS 的，著名的 NexT 主题用的 Swig，而 Pug 的语法目前有点接受不能，所以直接放弃了，而 Swig 早已停止更新，所以也放弃了，所以最终选择的还是相对熟悉的 EJS（而 EJS 最近的一次提交时间为 2018 年 11 月 28 日，看来应该也是要停止更新了，以后有机会试试 Pug 吧）。</p><p>　　技术决定之后，就要开始写了，最开始写的时候，由于不清楚 hexo 的工作机制，导致完全无法显示页面，后面查阅了几篇关于如何写 hexo 主题的文章，加上自己的慢慢摸索，终于弄懂了，hexo 的最初页面需要有一个 index 文件，在 index 中写入的东西，将会显示在 <code>http://localhost:4000/</code> 页面中，好了，终于能显示内容了，接下来要解决的是布局问题，hexo 的所有页面渲染都会通过一个叫 layout 的文件，layout 文件中必须存在一个 <code>&lt;%- body %&gt;</code> 语句，在渲染时，hexo 会用其它页面的内容替换 layout 中的 <code>&lt;%- body %&gt;</code> 语句，包括 index 中，所以在 layout 中写好 HTML 框架之后，其它页面只需要负责写内容就行。实现一个最简单的主题（只有纯文字版网页），只需要下面几步：</p><blockquote><blockquote><ol type="1"><li>在 index.ejs 文件中写入 <code>&lt;%- include('_partial/archive', &#123;item: page, is_index: true&#125;) %&gt;</code>；</li><li>然后在 _partial 文件夹中 archive.ejs 文件中写入：</li></ol></blockquote><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;% page.posts.each(function(item) &#123; %&gt;</span><br><span class="line">    &lt;%- include(&#x27;article&#x27;, &#123;item: item, is_index: true&#125;) %&gt;</span><br><span class="line">&lt;% &#125;) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;% if (page.total &gt; 1)&#123; %&gt;</span><br><span class="line">    &lt;%- paginator(&#123;</span><br><span class="line">        prev_text: &#x27;&amp;laquo; Prev&#x27;,</span><br><span class="line">        next_text: &#x27;Next &amp;raquo;&#x27;</span><br><span class="line">    &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></div><blockquote><ol start="3" type="1"><li>在 _partial 文件夹中 article.ejs 文件中写入 <code>&lt;div&gt;&lt;%- item.content %&gt;&lt;/div&gt;</code>；</li><li>最后在 layout.ejs 文件中写入：</li></ol></blockquote><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;%- body %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></div><blockquote><p>即可将文章内容显示出来，前提是已有文章。当然也可把上面的1~3步合起来算作一步，直接在 index.ejs 文件中写入：</p></blockquote><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;% page.posts.each(function(post) &#123; %&gt;</span><br><span class="line">    &lt;div&gt;&lt;%- post.content %&gt;&lt;/div&gt;</span><br><span class="line">&lt;% &#125;) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;% if (page.total &gt; 1)&#123; %&gt;</span><br><span class="line">    &lt;%- paginator(&#123;</span><br><span class="line">        prev_text: &#x27;&amp;laquo; Prev&#x27;,</span><br><span class="line">        next_text: &#x27;Next &amp;raquo;&#x27;</span><br><span class="line">    &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></div><p>这样就算是实现了一个最简单的主题，只是这个主题十分丑陋，文章也没有对应的标题。</p></blockquote><p><strong><em>※注：</em></strong> 在写这几步的时候，Shaun 在这里发现 hexo-browsersync 插件和 hexo s 命令有冲突，会造成一个bug：<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues/3180">hexo s 启动后，页面加载错误，大BUG</a>，具体表现为：当直接使用 <code>&lt;%- post.content %&gt;</code> 在首页显示文章时，index.html 将会无法加载完全，后面的一部分会加载错误。<strong>解决办法为：</strong>卸载 hexo-browsersync 插件。</p><p>　　完成上面几步，就算是写主题已经入门了，万事开头难，入门之后就相对简单了，只要按部就班的一步步走下去就行了，接下来就是慢慢进行排版布局问题，就这样，Shaun 一边参考其它一些主题的排版和写法，一边查阅网上资料实现自己的想法，一步一步的解决问题，直到完成该主题。</p><p><strong>PS：</strong> <em>主题配置文件 _config.yml 中的配置变量的命名和其它编程语言一样，不能以数字作为第一个字符</em>。</p><h2 id="文档篇">文档篇</h2><p>　　Chi 主题涉及到的技术主要为：Bootstrap4、jQuery3、Stylus、EJS、HTML5、CSS3、ES6 等；运行环境为：node-v8.11.1、Hexo-3（hexo-cli-1.1.0）等；测试浏览器为Firefox 60.5.0 esr 和 Chrome 72.0.3626.109，其它浏览器没测过，也不考虑测，有兴趣的童鞋可以自己测自己改。</p><p>　　Chi 主题的配色主要参考 Shaun 原来的主题 spfk_x，排版部分参考了 <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-theme-freemind"><strong>hexo-theme-freemind</strong></a>，部分代码也是来自这两个主题。Chi 主题的一些动画实现优先采用 CSS，除了那些无法用 CSS 实现或 Shaun 不知道如何用 CSS 实现的，所以 JS 代码部分不算很多，网页加载速度也勉强能够接受吧。</p><p>　　Chi 主题的代码高亮部分本来想参考 <a target="_blank" rel="noopener" href="http://jumpbyte.cn/2016/07/02/use-and-install-prettify/">为hexo博客加入prettify高亮插件</a> 使用prettify替换默认的代码高亮，但使用了之后发现效果不是很好，就还是使用默认的样式了。</p><p>　　Chi 主题的使用文档暂时就不写了，毕竟这个主题只是 Shaun 个人使用（应该也不会有其他人使用了，万一真有人要用却不太会用，欢迎提 issue，以后酌情考虑添加使用文档 🙃），由于 Shaun 只是前端小白，这个主题也只是当学习练手开发，里面肯定会有各种各样的问题，欢迎提 issue 或 fork 或 clone 后自行修改，提 issue 的话，Shaun 不保证一定能解决，毕竟水平有限，当然如果有代码优化想法还望不吝赐教 (｡･ω･｡)ﾉ♡ （至于 px 换 em 或 rem 就不用提了，没什么原因，主要是 Shaun 懒，更深层的原因在于 Shaun 手头上还没有更高分辨率的显示器，不知道显示差距有多大，不好进行测试 😓）。</p><p><strong>PS：</strong> Shaun 使用了 <a target="_blank" rel="noopener" href="https://blog.ihoey.com/posts/Hexo/2018-05-27-hexo-code-block.html">Hexo 博客美化代码块| 梦魇小栈</a> 中的脚本对 Markdown 代码部分进行了美化渲染，但是该脚本有时候渲染会出现一些问题，无法进行美化，可能是代码语法格式有错误，这时<em>需要自己手动调整一下 Markdown 代码格式</em>。</p><p>使用 Chi 主题推荐安装插件：</p><ul><li>hexo-renderer-pandoc # 使用pandoc渲染markdown，安装前需卸载默认渲染器hexo-renderer-marked</li><li>hexo-generator-feed # RSS订阅</li><li>hexo-generator-searchdb # 本地搜索</li><li>hexo-abbrlink # 文章唯一永久链接</li><li>hexo-all-minifier # 快速压缩优化代码</li></ul><p>好了，暂时就写到这里了。</p><h2 id="后记">后记</h2><p>　　当 Shaun 有一天使用其它 blog 框架时，这个主题可能就不再维护更新了，但其中的排版样式应该还会或保留或更新。下面要做的事就不立 Flag 了，因为立了多半会完不成，这就很尴尬了，但不立又没有动力，真是让人脑壳疼啊 (๑•ั็ω•็ั๑)，反正是一件长期要做的事了，长到可能接下来的业余时间可能都在做这件事，或开源或不开源，看以后的心情和完成程度了 （↖(^ ω ^)↗）。</p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-Matlab和OpenCV混合编程小结" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/64889158.html"><time datetime="2018-11-09T12:26:16.000Z">2018-11-09</time></a></span><section class="article-title article-title--index"><a href="/posts/64889158.html">Matlab和OpenCV混合编程小结</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color4 article-category-link" href="/categories/Study/">Study</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color1 article-tag-none-link" href="/tags/matlab/" rel="tag">matlab</a><a class="color1 article-tag-none-link" href="/tags/opencv/" rel="tag">opencv</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><p><font color="#FA8072">本文所用的 Matlab 版本为 Matlab R2017b，OpenCV 版本为 opencv-3.4.3，C++ IDE 为 Visual Studio 2017，系统环境为 Windows 10_x64。</font></p><h2 id="前言">前言</h2><p>　　秋招告一段落了，又要回到最初的起点，继续搞（qu）科（hua）研（shui）了，由于前人的代码主要是用 C++ 和 Matlab 混编实现的，而 Shaun 比较熟悉的是 C++ 和 OpenCV，而用 OpenCV 完全重写前人的代码工作量又太大了而且有些 API 不是很好互换，为了方便站在巨人的肩膀上继续前进，所以只能学习一下 OpenCV 和 Matlab 的混合编程了，这样在前人的基础上实现 Shaun 自己的想法相对来说更容易一些。</p></div><div class="article-content--all"><p><font color="#FA8072">本文所用的 Matlab 版本为 Matlab R2017b，OpenCV 版本为 opencv-3.4.3，C++ IDE 为 Visual Studio 2017，系统环境为 Windows 10_x64。</font></p><h2 id="前言">前言</h2><p>　　秋招告一段落了，又要回到最初的起点，继续搞（qu）科（hua）研（shui）了，由于前人的代码主要是用 C++ 和 Matlab 混编实现的，而 Shaun 比较熟悉的是 C++ 和 OpenCV，而用 OpenCV 完全重写前人的代码工作量又太大了而且有些 API 不是很好互换，为了方便站在巨人的肩膀上继续前进，所以只能学习一下 OpenCV 和 Matlab 的混合编程了，这样在前人的基础上实现 Shaun 自己的想法相对来说更容易一些。</p><span id="more"></span><h2 id="准备篇">准备篇</h2><p>　　由于目前主要用 C++ 实现的是一些小功能，也不需要调试，所以就直接使用 VSCode 进行编程了（或许以后还是会用 VS 进行一些简单的调试），而在没有配置相关环境的前提下，VSCode 无法实现自动补全，所以需要在 VSCode 中配置相应环境。具体添加方法如下：在 VSCode 中点击菜单栏 “<strong>查看</strong>” ==》“<strong>命令面板...</strong>” ==》选择 “<strong>C/Cpp: Edit Configurations...</strong>”==》在出现的 <code>c_cpp_properties.json</code> 文件中 <code>"includePath"</code> 对应的值中添加 OpenCV 的 include 目录和 Matlab 的 include 目录，添加之后的 <code>"includePath"</code> 如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JSON"><div class="code-copy"></div><figure class="highlight hljs json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;includePath&quot;</span>: [</span><br><span class="line">	<span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span></span><br><span class="line">	, <span class="string">&quot;D:/ProgramFiles/OpenCV/3.4.3/build/include/**&quot;</span></span><br><span class="line">	, <span class="string">&quot;C:/Program Files/MATLAB/R2017b/extern/include/**&quot;</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>如此就能在 VSCode 中写 OpenCV 和 Matlab 相关函数时实现自动补全了。</p><h2 id="matlab-和-c-混编篇">Matlab 和 C++ 混编篇</h2><p>　　由于 Shaun 使用的是 OpenCV 的 C++ 接口，所以需要先知道 Matlab 和 C++ 混合编程如何进行。以实现两个数的加法为例，首先创建一个 mexAdd.cpp 文件，其中 C++ 代码具体如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="C++"><div class="code-copy"></div><figure class="highlight hljs c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mex.h&gt;</span>    <span class="comment">// 必须包含头文件 mex.h</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查输入是否合法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">checkInputs</span><span class="params">(<span class="keyword">int</span> nrhs, <span class="keyword">const</span> mxArray *prhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nrhs != <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;Incorrect number of inputs. Function expects 2 inputs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">mxIsDouble</span>(prhs[<span class="number">0</span>]))</span><br><span class="line">    &#123;       </span><br><span class="line">        <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;Input number must be double.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">add</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * nlhs：matlab 函数左边变量个数，即返回值参数个数</span></span><br><span class="line"><span class="comment"> * plhs： matlab 函数左边变量，即返回值参数</span></span><br><span class="line"><span class="comment"> * nrhs： matlab 右边变量个数，即函数输入参数个数</span></span><br><span class="line"><span class="comment"> * prhs： matlab 函数右边变量，即函数输入参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mexFunction</span><span class="params">(<span class="keyword">int</span> nlhs, mxArray *plhs[], <span class="keyword">int</span> nrhs, <span class="keyword">const</span> mxArray *prhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">checkInputs</span>(nrhs, prhs);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输入参数可以不使用指针，但输出参数必须使用指针</span></span><br><span class="line">    <span class="keyword">double</span> *a = <span class="literal">nullptr</span>;    <span class="comment">// 输出参数</span></span><br><span class="line">    <span class="keyword">double</span> b = <span class="number">0.0</span>, c = <span class="number">0.0</span>;    <span class="comment">// 两个输入参数</span></span><br><span class="line">    plhs[<span class="number">0</span>] = <span class="built_in">mxCreateDoubleMatrix</span>(<span class="number">1</span>, <span class="number">1</span>, mxREAL);   <span class="comment">// 创建1x1的实数矩阵用作输出第一个参数</span></span><br><span class="line">    a = <span class="built_in">mxGetPr</span>(plhs[<span class="number">0</span>]);  <span class="comment">// 用指针a指向第一个输出</span></span><br><span class="line">    b = *(<span class="built_in">mxGetPr</span>(prhs[<span class="number">0</span>]));   <span class="comment">// b作为第一个输入</span></span><br><span class="line">    c = *(<span class="built_in">mxGetPr</span>(prhs[<span class="number">1</span>]));   <span class="comment">// c作为第二个输入</span></span><br><span class="line">    *a = <span class="built_in">add</span>(b, c); <span class="comment">// 计算b、c之和得到a</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>　　若要使用 Matlab 混合编译 C++，必须要添加头文件 <code>mex.h</code>，使用 <code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])</code> 函数接收输入输出参数，如此编译完成之后，就和使用普通的 Matlab 函数一样了。具体编译调用方法如下，新建 addTest.m 文件，其中 Matlab 代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="MATLAB"><div class="code-copy"></div><figure class="highlight hljs matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">clc, clear, close all;  <span class="comment">% 清空变量和关闭所有打开窗口</span></span><br><span class="line"></span><br><span class="line">current_folder = pwd;   <span class="comment">% 获取当前文件路径</span></span><br><span class="line">addpath(genpath(current_folder));    <span class="comment">% 添加matlab临时搜索路径，并包含子文件夹（matlab退出后该路径不存在）</span></span><br><span class="line"></span><br><span class="line">mex mexAdd.cpp; <span class="comment">% 混合编译C++，得到matlab可识别的函数</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">3.1</span>; b = <span class="number">2.6</span>;</span><br><span class="line">c = mexAdd(a, b);</span><br></pre></td></tr></table></figure></div><p>其中 <code>mex mexAdd.cpp</code> 可以直接在 Matlab 命令行窗口下预先执行编译动作，编译成功后会输出一个 mexAdd.mexw64 文件，若是 32 位系统则后缀为 mexw32，之后直接执行 <code>ans = mexAdd(3.1, 2.6);</code> 即可在 Matlab 中调用该函数。在 Matlab 首次执行 mex 命令时，Matlab 会自动选择 VS 编译器作为默认 C++ 编译器，也可以执行 <code>mex -setup</code> 初始化或更换默认编译器。</p><p><strong>BTW：</strong> 最好在安装 Matlab 之前安装 Visual Studio，否则使用 <code>mex</code> 编译时，可能会出现找不到编译器的情况。</p><h2 id="matlab-和-opencv-混编篇">Matlab 和 OpenCV 混编篇</h2><p>　　Matlab 和 OpenCV 混编大体上和 C++ 混编差不多，最大的区别在于如何利用 OpenCV 的 cv::Mat 对象和相关的库函数，Matlab 良心的提供了 OpenCV 接口以实现 mexArray 和 cv::Mat 格式之间的互相转化，使用这些接口需要包含头文件 <code>opencvmex.hpp</code> 。如果不使用 Matlab 提供的这些接口而是自己写转换过程的话有点麻烦，因为 Matlab 的数据是以列优先方式存储的，而 OpenCV 的数据是以行优先方式存储的。至于如何进行混编，主要有以下三种方式：</p><ol type="1"><li>第一种是自己写 make.m 文件，相当于 gcc 编译时需要的 Makefile 文件，需要手动拼接各种编译命令和添加相应的附加依赖库；</li><li>第二种是通过 Matlab 官方提供的 <a target="_blank" rel="noopener" href="http://cn.mathworks.com/help/vision/ug/opencv-interface.html">Computer Vision System Toolbox OpenCV Interface</a> 功能，Matlab 没有默认安装该功能，这个功能需要另外安装，具体安装方法为：在 Matlab 命令行窗口输入 <code>visionSupportPackages</code>，即可弹出“<strong>附加功能资源管理器</strong>”窗口选择对应附加功能安装即可，安装完之后可通过 <code>mexOpenCV</code> 命令对包含 OpenCV 库函数的 .cpp 文件进行编译，查看 mexOpenCV.m 的源码可知，<code>mexOpenCV</code> 其实是对 <code>mex</code> 命令进行了封装，其调用的 OpenCV 库也是其工具箱自带的 OpenCV，而且有些库还没有包含，有一定的局限性，不过该附加功能自带了些示例程序，可以参考学习一下；</li><li>第三种是使用第三方的 <a target="_blank" rel="noopener" href="https://github.com/kyamagu/mexopencv">mexopencv</a>，不过需要安装与该工具对应的 OpenCV 版本，并需要进行一定的配置工作，略显麻烦。</li></ol><p>　　Shaun 这里直接使用的是第一种方式，自己写 make.m 文件，比较灵活，想怎么配置就怎么配置。下面具体以 RGB 转 GRAY 为例，首先新建 mexRGB2GRAY.cpp，其中 C++ 代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="C++"><div class="code-copy"></div><figure class="highlight hljs c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencvmex.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _DO_NOT_EXPORT</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(_DO_NOT_EXPORT)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DllExport  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DllExport __declspec(dllexport)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Usage: [img_matrix] = mexRGB2GRAY(&#x27;img.jpg&#x27;);</span></span><br><span class="line"><span class="comment"> * Input: a image file;</span></span><br><span class="line"><span class="comment"> * Output: a matrix of image which can be read by Matlab</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查输入是否合法</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">checkInputs</span><span class="params">(<span class="keyword">int</span> nrhs, <span class="keyword">const</span> mxArray *prhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nrhs != <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;Incorrect number of inputs. Function expects 1 inputs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mxGetNumberOfDimensions</span>(prhs[<span class="number">0</span>]) != <span class="number">3</span>) <span class="comment">// 获取Matlab图像总的维度个数（灰度图为2维，RGB彩色图为3维）</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;Incorrect number of dimensions. First input must be a RGB image.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查图像数据类型</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">mxIsUint8</span>(prhs[<span class="number">0</span>]))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">mexErrMsgTxt</span>(<span class="string">&quot;Template and image must be UINT8.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exit_with_help</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">mexPrintf</span>(<span class="string">&quot;Uasge: [image_matrix] = mexRGB2GRAY(&#x27;image_file.jpg&#x27;);\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fakeAnswer</span><span class="params">(mxArray *plhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    plhs[<span class="number">0</span>] = <span class="built_in">mxCreateNumericMatrix</span>(<span class="number">0</span>, <span class="number">0</span>, mxDOUBLE_CLASS, mxREAL);  <span class="comment">// 创建一个0x0的空双精度matlab矩阵</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">cv::Mat <span class="title">RGB2GRAY</span><span class="params">(<span class="keyword">const</span> mxArray *prhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cv::Ptr&lt;cv::Mat&gt; img_cv = <span class="built_in">ocvMxArrayToMat_uint8</span>(prhs[<span class="number">0</span>], <span class="literal">true</span>);   <span class="comment">// 将unit8数据类型的matlab矩阵转换为OpenCV的mat对象智能指针</span></span><br><span class="line">    <span class="keyword">if</span> (img_cv.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> cv::Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将RGB转化为GRAY图</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">gray</span><span class="params">((*img_cv).size(), CV_8UC1)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> ((*img_cv).<span class="built_in">channels</span>() == <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cv::<span class="built_in">cvtColor</span>(*img_cv, gray, CV_RGB2GRAY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>((*img_cv).<span class="built_in">channels</span>() == <span class="number">4</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cv::<span class="built_in">cvtColor</span>(*img_cv, gray, CV_RGBA2GRAY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        (*img_cv).<span class="built_in">copyTo</span>(gray);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mexFunction</span><span class="params">(<span class="keyword">int</span> nlhs, mxArray *plhs[], <span class="keyword">int</span> nrhs, <span class="keyword">const</span> mxArray *prhs[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">checkInputs</span>(nrhs, prhs);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nrhs == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cv::Mat gray = <span class="built_in">RGB2GRAY</span>(prhs);</span><br><span class="line">        plhs[<span class="number">0</span>] = <span class="built_in">ocvMxArrayFromMat_uint8</span>(gray);   <span class="comment">// 将unit8数据类型的OpenCV的mat对象转换为matlab矩阵</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit_with_help</span>();</span><br><span class="line">        <span class="built_in">fakeAnswer</span>(plhs);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>然后新建 makefile.m 文件，自己配置相关编译环境， Shaun 这里具体如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="MATLAB"><div class="code-copy"></div><figure class="highlight hljs matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makefile</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 选择相应计算机系统版本</span></span><br><span class="line">    is_64bit = strcmp(computer, <span class="string">&#x27;MACI64&#x27;</span>) || strcmp(computer, <span class="string">&#x27;GLNXA64&#x27;</span>) || strcmp(computer, <span class="string">&#x27;PCWIN64&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 配置OpenCV编译环境，如果系统是64位的，则OpenCV也需要是64位的</span></span><br><span class="line">    out_dir = <span class="string">&#x27;.&#x27;</span>; <span class="comment">% 输出目录,这里为当前目录</span></span><br><span class="line">    CPPFLAGS = <span class="string">&#x27; -O -DNDEBUG -I./ -ID:/ProgramFiles/OpenCV/3.4.3/build/include&#x27;</span>; <span class="comment">% OpenCV “include” 目录</span></span><br><span class="line">    LDFLAGS = <span class="string">&#x27; -LD:/ProgramFiles/OpenCV/3.4.3/build/x64/vc15/lib -LC:/PROGRA~1/MATLAB/R2017b/extern/lib/win64/microsoft&#x27;</span>;  <span class="comment">% OpenCV “lib” 目录 和 MatLab 附加库目录</span></span><br><span class="line">    LIBS = <span class="string">&#x27; -lopencv_world343 -lmwocvmex&#x27;</span>; <span class="comment">% 添加OpenCV相关库和Matlab libmwocvmex.lib库</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> is_64bit</span><br><span class="line">        CPPFLAGS = [CPPFLAGS <span class="string">&#x27; -largeArrayDims&#x27;</span>];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 需要编译的 cpp 文件</span></span><br><span class="line">    compile_files = &#123;</span><br><span class="line">        <span class="string">&#x27;mexRGB2GRAY.cpp&#x27;</span></span><br><span class="line">        <span class="string">&#x27;mexAdd.cpp&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 开始编译</span></span><br><span class="line">    <span class="keyword">for</span> k = <span class="number">1</span> : <span class="built_in">length</span>(compile_files)</span><br><span class="line">        str = compile_files&#123;k&#125;;</span><br><span class="line">        fprintf(<span class="string">&#x27;compilation of: %s\n&#x27;</span>, str);</span><br><span class="line">        str = [str <span class="string">&#x27; -outdir &#x27;</span> out_dir CPPFLAGS LDFLAGS LIBS];</span><br><span class="line">        args = regexp(str, <span class="string">&#x27;\s+&#x27;</span>, <span class="string">&#x27;split&#x27;</span>);</span><br><span class="line">        mex(args&#123;:&#125;);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></div><p>其中 Matlab 配置路径中的 <code>PROGRA~1</code> 是指 Windows 下的 C 盘中的 Program Files 文件夹，为了使用 Matlab 提供的转换接口，<code>libmwocvmex.lib</code> 是必须要添加的一个库。最后具体使用示例 Matlab 代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="MATLAB"><div class="code-copy"></div><figure class="highlight hljs matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">clc, clear, close all;  <span class="comment">% 清空变量和关闭所有打开窗口</span></span><br><span class="line"></span><br><span class="line">current_folder = pwd;   <span class="comment">% 获取当前文件路径</span></span><br><span class="line">addpath(genpath(current_folder));    <span class="comment">% 添加matlab临时搜索路径，并包含子文件夹（matlab退出后该路径不存在）</span></span><br><span class="line"></span><br><span class="line">makefile();</span><br><span class="line"></span><br><span class="line">image = imread(<span class="string">&#x27;lena.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line">I = mexRGB2GRAY(image);</span><br><span class="line"><span class="built_in">figure</span>, imshow(I);</span><br></pre></td></tr></table></figure></div><p>也可以将 <code>makefile();</code> 函数预先执行。<strong>※注：</strong> <em>这里如果出现编译报错 “<font color="#FA8072">缺少依赖共享库</font>” 的情况可能还需要把 OpenCV 的 bin 目录加到系统环境变量 Path 中，Shaun 这里是路径 <code>D:\ProgramFiles\OpenCV\3.4.3\build\x64\vc15\bin</code>，然后重启 Matlab</em>。</p><h2 id="调试篇">调试篇</h2><p>　　若要对写的 mexAdd.cpp 文件进行调试，则需要</p><ol type="1"><li><p>先使用 <code>mex -g mexAdd.cpp</code> 编译该文件，由于添加了 -g 参数，此时除了会生成 mexAdd.mexw64 文件之外，还会生成一个 mexAdd.mexw64.pdb 文件，该文件即包含调试信息；</p></li><li><p>然后在相应 .m 文件中调用 mexAdd 函数的位置设置断点，运行该相关文件，matlab 程序会在调用 mexAdd 函数之前停下；</p></li><li><p>此时使用 VS2017 打开 mexAdd.cpp 文件，在需要调试的地方设置好断点，选中菜单栏中的“<strong>调试</strong>” ==》“<strong>附加到进程</strong> ”，或者直接点击菜单栏上的<strong><em>绿色三角</em> 附加...</strong>，选中 <strong>MATLAB.exe</strong> ，点击附加，即可看到 VS2017 调试程序已启动；</p></li><li><p>最后回到 matlab 中继续运行相关文件，即可看到程序跳转到 VS2017，并执行到设置断点的地方，此时即可在 VS2017 中按调试 C++ 程序一样对其进行调试。</p></li></ol><p>　　完成调试并执行完 mexAdd.cpp 之后，程序将回到 matlab 界面继续执行，直到整个 matlab 程序执行完成。</p><h2 id="后记">后记</h2><p>　　这次主要是记录 Matlab 如何调用 C++ 编写的函数，其实还可以用 C++ 调用 Matlab 编写的函数，不过那是另一种混编方式了，以后有机会碰到的话再继续记录吧。</p><h2 id="参考资料">参考资料</h2><p>[１] <a target="_blank" rel="noopener" href="https://blog.csdn.net/zouxy09/article/details/20553007">Matlab与C++混合编程（依赖OpenCV）</a></p><p>[２] <a target="_blank" rel="noopener" href="https://ww2.mathworks.cn/help/matlab/matlab_external/changing-default-compiler.html">更改默认编译器</a></p><p>[３] <a target="_blank" rel="noopener" href="http://www.mathworks.com/help/vision/opencv-interface-support-package.html">OpenCV Interface Support</a></p><p>[４] <a target="_blank" rel="noopener" href="https://blog.csdn.net/linzhineng44/article/details/51646765">Matlab OpenCV混合编程</a></p><p>[５] <a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_620b47660100h3yn.html">vc与matlab连接的实用函数简介</a></p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-Android实践小结" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/be7949e4.html"><time datetime="2018-07-16T13:00:50.000Z">2018-07-16</time></a></span><section class="article-title article-title--index"><a href="/posts/be7949e4.html">Android实践小结</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color1 article-category-link" href="/categories/Study/">Study</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color1 article-tag-none-link" href="/tags/android/" rel="tag">android</a><a class="color1 article-tag-none-link" href="/tags/java/" rel="tag">java</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><p><font color="#FA8072">实践环境为：android-studio-bundle-162.4069837-windows（Android Studio 2.3.3 带 Android SDK 版）、该 Android Studio 自带的 JRE，系统环境为 Win10-1607。</font></p><h2 id="前言">前言</h2><p>　　由于上一届没有更新任何项目文档和学习文档，Shaun 只能自己去网上查找相关的资料，从零开始学习，顺便留下一些文档，正所谓：「代码未动，文档先行」，也算是实践出真知吧。</p><p><strong>PS：</strong> 本次实践的项目主要来自 <a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote/android-tutorial-exercise-1.html">12.1Android 实战 ：DrySister看妹子应用(第一版) — 项目搭建与简单实现</a>（<a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote_genre/android" class="uri">http://www.runoob.com/w3cnote_genre/android</a>） 以及目前手头上正在维护的项目。</p></div><div class="article-content--all"><p><font color="#FA8072">实践环境为：android-studio-bundle-162.4069837-windows（Android Studio 2.3.3 带 Android SDK 版）、该 Android Studio 自带的 JRE，系统环境为 Win10-1607。</font></p><h2 id="前言">前言</h2><p>　　由于上一届没有更新任何项目文档和学习文档，Shaun 只能自己去网上查找相关的资料，从零开始学习，顺便留下一些文档，正所谓：「代码未动，文档先行」，也算是实践出真知吧。</p><p><strong>PS：</strong> 本次实践的项目主要来自 <a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote/android-tutorial-exercise-1.html">12.1Android 实战 ：DrySister看妹子应用(第一版) — 项目搭建与简单实现</a>（<a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote_genre/android" class="uri">http://www.runoob.com/w3cnote_genre/android</a>） 以及目前手头上正在维护的项目。</p><span id="more"></span><h2 id="布局篇">布局篇</h2><p>　　首先打开 Android Studio ，新建项目，一路默认下去即可，等待片刻，“MainActivity.java” 文件的错误提示就会自然消失，<em>将左侧栏上方的 “Android” 切换为 “Project”</em>，打开 <strong>app</strong> -&gt; <strong>src</strong> -&gt; <strong>main</strong> -&gt; <strong>res</strong> -&gt; <strong>layout</strong> -&gt; <strong>activity_main.xml</strong>，由于其默认是以 “Text” 的模式打开（Android Studio 右侧有个 “Preview” 标签可以进行当前布局预览），这对于小白来说不大好控制布局，所以需要在该文件底部将 “Text” 切换为 “Design”，如此可以进行拖拽式布局，以下正式开始进入 Android UI 的布局。至于具体如何进行布局设置，可以参考 <a target="_blank" rel="noopener" href="https://www.diycode.cc/topics/744">Android ConstraintLayout 使用指南</a> 和 <a target="_blank" rel="noopener" href="https://blog.csdn.net/nicolelili1/article/details/52611162">Android实现拖拽式布局开发----约束性布局</a> 以下两篇资料。</p><p>　　而若要使控件大小根据屏幕大小自适应，一般可使用相对布局，但如今的 Android Studio 默认新建的页面就是一种类似于相对布局的页面，所以直接在控件中设置 <code>android:layout_width="match_parent"</code> 以及 <code>android:layout_height="match_parent"</code> 属性即可，再设置 layout_margin 属性进行调整即可，而若要让控件大小随控件内的内容自适应，则只需要将 match_parent 更改为 wrap_content 即可。</p><h2 id="编码篇">编码篇</h2><p>　　首先新建自己的业务逻辑 java 代码，具体新建方法可参考 <a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/f79b7cb36fc6369145023e7f.html">Android studio怎么创建一个Java类文件</a> ，在 <strong>MainActivity.java</strong> 文件所在目录上鼠标右键 <strong>New</strong> -&gt; <strong>Java Class</strong>，新建完成之后即可编写自己的业务逻辑。若要新建文件夹，则在目录上鼠标右键 <strong>New</strong> -&gt; <strong>Package</strong> 。若要使级联目录展开，例如 <code>com.example.admin.myapplicationtest</code>，则需要在该目录的父级目录新建一个 <code>com.example.admin.test</code> Package 即可将<code>com.example.admin</code> 目录展开。</p><h3 id="页面跳转">页面跳转</h3><p>　　首先新建一个页面 jump_test_activity，在 <code>\MyApplicationTest\app\src\main\res\layout</code>，即 layout 文件夹上鼠标右键，“<strong>New</strong>” ==》“<strong>Activity</strong>” ==》“<strong>Empty Activity</strong>” （有多种 Activity 样式可供选择，Shaun 这里就以 Empty Activity为例了），随后弹出窗口，在 <strong>Activity Name</strong> 栏填写页面逻辑控制代码文件名 JumpTestActivity，在 <strong>Layout Name</strong> 栏填写页面 UI 设计代码文件名 jump_test_activity，在 <strong>Package name</strong> 以及页面逻辑控制代码文件所在在包名 com.example.admin.myapplicationtest.ui.activity，其它设置为默认即可，这样新建的页面的有个问题就是会有一个丑陋的标题栏，所以还需要去掉该标题栏，具体方法为：</p><ol type="1"><li><p>在 <code>MyApplicationTest\app\src\main\res\values\styles.xml</code> 文件中添加：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="XML"><div class="code-copy"></div><figure class="highlight hljs xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme.NoActionBar&quot;</span>&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;windowActionBar&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li><li><p>将 <code>MyApplicationTest\app\src\main\AndroidManifest.xml</code> 中的 <code>&lt;activity android:name=".ui.activity.JumpTestActivity"&gt;&lt;/activity&gt;</code> 更改为 <code>&lt;activity android:name=".ui.activity.JumpTestActivity" android:theme="@style/AppTheme.NoActionBar"&gt;&lt;/activity&gt;</code> ，再次编译运行即可看到标题栏已消失。</p></li></ol><p>好了，准备阶段已经搞完，接下来就是正式的页面跳转了，一般页面跳转是用户点击事件发生的，所以需要添加一个具有点击事件的控件，一般而言就是 Button 了，这里设该 button 的 id 为 page_jump_btn；该 button 所在页面为 <code>MyApplicationTest\app\src\main\res\layout\activity_main.xml</code>，则在对应的逻辑控制文件<code>MyApplicationTest\app\src\main\java\com\example\admin\myapplicationtest\ui\activity\MainActivity.java</code> 中的页面跳转代码为：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JAVA"><div class="code-copy"></div><figure class="highlight hljs java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">page_jump_btn = (Button) findViewById(R.id.page_jump_btn);</span><br><span class="line">page_jump_btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">		Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, JumpTestActivity.class);</span><br><span class="line">		MainActivity.<span class="keyword">this</span>.startActivity(intent);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>如此，在主界面中点击跳转按钮，即可跳转到新建页面。</p><h3 id="url-中的坑">URL 中的坑</h3><p>　　在学 12.2 的时候，由于请求的URL地址中有中文“福利”，所以其返回的字符串为：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JSON"><div class="code-copy"></div><figure class="highlight hljs json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;error&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">&quot;results&quot;</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>可以看到 “results” 的值为空，这显然是错的，后面调试发现需要对 URL 地址转义（这都 8102 年了，为什么 URL 地址中还要有中文，或者说为什么 URL 地址还不支持解析中文 ╮(╯▽╰)╭），具体转义代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="JAVA"><div class="code-copy"></div><figure class="highlight hljs java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch_url = Uri.encode(fetch_url);  <span class="comment">// 将URL地址转义</span></span><br><span class="line">fetch_url = fetch_url.replace(<span class="string">&quot;%3A&quot;</span>, <span class="string">&quot;:&quot;</span>);  <span class="comment">// 将%3A替换为:</span></span><br><span class="line">fetch_url = fetch_url.replace(<span class="string">&quot;%2F&quot;</span>, <span class="string">&quot;/&quot;</span>);  <span class="comment">// 将%2F替换为/</span></span><br></pre></td></tr></table></figure></div><p>主要参考资料为：<a target="_blank" rel="noopener" href="https://blog.csdn.net/joshuaxx316/article/details/47749181">Android url中文乱码问题及解决办法</a> 和 <a target="_blank" rel="noopener" href="https://blog.csdn.net/top_code/article/details/26288057">Android URL encode 空格处理</a> 。</p><h3 id="sql-语句中的坑">SQL 语句中的坑</h3><p>　　在使用字符串拼写 SQL 语句时，<strong><em>一定要注意 SQL 语句中的空格</em></strong>，要不然拼起来的 SQL 语句可能语法不通而导致 APP 崩溃。如在使用创建表的 SQL 语句时，可能的错误写法（不注意空格）如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="SQL"><div class="code-copy"></div><figure class="highlight hljs sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String create_table_sql <span class="operator">=</span> &quot;CREATE TABLE IF NOT EXISTS&quot; <span class="operator">+</span> TableDefine.TABLE_FULI <span class="operator">+</span> &quot;(&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_ID <span class="operator">+</span> &quot;INTEGER PRIMARY KEY AUTOINCREMENT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_ID <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_CREATEAT <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_DESC <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_PUBLISHEDAT <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_SOURCE <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_TYPE <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_URL <span class="operator">+</span> &quot;TEXT,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_USED <span class="operator">+</span> &quot;BOOLEAN,&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_WHO <span class="operator">+</span> &quot;TEXT&quot;</span><br><span class="line">                <span class="operator">+</span> &quot;)&quot;;</span><br></pre></td></tr></table></figure></div><p>以上写法无法正确建表，甚至会因为错误 SQL 语句而导致 APP 闪退，正确的写法如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="SQL"><div class="code-copy"></div><figure class="highlight hljs sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String create_table_sql <span class="operator">=</span> &quot;CREATE TABLE IF NOT EXISTS &quot; <span class="operator">+</span> TableDefine.TABLE_FULI <span class="operator">+</span> &quot; (&quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_ID <span class="operator">+</span> &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_ID <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_CREATEAT <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_DESC <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_PUBLISHEDAT <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_SOURCE <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_TYPE <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_URL <span class="operator">+</span> &quot; TEXT, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_USED <span class="operator">+</span> &quot; BOOLEAN, &quot;</span><br><span class="line">                <span class="operator">+</span> TableDefine.COLUMN_FULI_WHO <span class="operator">+</span> &quot; TEXT&quot;</span><br><span class="line">                <span class="operator">+</span> &quot;)&quot;;</span><br></pre></td></tr></table></figure></div><h2 id="调试篇">调试篇</h2><p>　　编码完成之后，一般而言需要进行调试，Android Studio 的调试可参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/testcs_dn/article/details/53714678">【Android 开发入门】android studio 控制台打印输出日志</a> ，进入调试模式具体方法为：点击上方工具栏中的 <strong>Debug 'app'</strong> 图标，而不是直接 <strong>Run 'app'</strong>，进入调试模式之后，点击下方的 “Android Monitor”，切换到 “logcat” 标签，即可查看调试信息。</p><p>　　华为手机打印调试信息可参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/scwhy/article/details/7432414">华为手机logcat不出日志解决方案</a>。这里由于 Shaun 还没有对 <strong>AndroidManifest.xml</strong> 进行修改，所以该 APP 在点击 Button 的时候会直接闪退，调试窗口出现 <font color="#FA8072"><em>java.lang.SecurityException: Permission denied (missing INTERNET permission?)</em></font> 错误信息，参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/hack8/article/details/28038541">android菜瓜笔记之missing INTERNET permission</a> 和 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17360924/securityexception-permission-denied-missing-internet-permission">SecurityException: Permission denied (missing INTERNET permission?)</a> 可知，该 APP 没有网络权限，所以需要在 AndroidManifest.xml 中添加网络权限，具体在 <em>manifest</em> 标签中添加语句 <code>&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</code>，如此该 APP 就能正常执行了。</p><p><strong>PS：</strong> <em>如果是对应用发生闪退或崩溃的原因进行调试，建议直接在 <strong>logcat</strong> 中搜索 <strong>fatal</strong> 关键字</em>。</p><h2 id="附录">附录</h2><h3 id="更换马甲重新发布为另一个-app">更换马甲重新发布为另一个 app</h3><p>　　即一样的代码却编译出另一个相同的 app，在某些特殊的需求（使两个功能大致一样的 app 共存在一台手机上）上可能需要这个技巧，具体步骤如下（以 MyApplicationTest 更名为 MyApplication 为例）：</p><ol type="1"><li>首先将 MyApplicationTest 文件夹（即 APP 根目录）更名为 MyApplication；（这一步不是刚需）</li><li>将 <code>MyApplicationTest\app\src\main\res\values\strings.xml</code> 文件中 <code>&lt;string name="app_name"&gt;MyApplicationTest&lt;/string&gt;</code> 更改为 <code>&lt;string name="app_name"&gt;MyApplication&lt;/string&gt;</code>；</li><li>将 <code>MyApplicationTest\app\build.gradle</code> 文件中 <code>applicationId "com.example.admin.myapplicationtest"</code> 更改为 <code>applicationId "com.example.admin.myapplication"</code> 。（这一步是刚需）</li></ol><p>如此，即可另外安装一个全新 APP，同时保留原有 APP，至于 applicationId 的更多作用和用法可参考 <a target="_blank" rel="noopener" href="https://developer.android.com/studio/build/application-id?hl=zh-cn">设置应用 ID</a> 。更换 APP 图标只需在 app 文件上鼠标右键， “<strong>New</strong>” ==》“<strong>Image Asset</strong>” ，即可弹出设置 app 图标窗口，或者直接更改 AndroidMainfest.xml 文件中的 <code>android:icon</code> 也可。</p><h2 id="后记">后记</h2><p>　　排版可能有点乱，毕竟是随便写的，碰到问题就简单的记录一下，Shaun 这次的实践过程可在 <a target="_blank" rel="noopener" href="https://github.com/cniter/AndroidLearning"><strong>AndroidLearning</strong></a> 中查看，页面跳转的方法来自手头上正在开发维护的一个项目，附录中第一个问题的来源是对方提出的一个特殊需求。</p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-C--数组中的坑" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/fc1165b7.html"><time datetime="2018-06-28T12:46:12.000Z">2018-06-28</time></a></span><section class="article-title article-title--index"><a href="/posts/fc1165b7.html">C++数组中的坑</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color2 article-category-link" href="/categories/Problems/">Problems</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color2 article-tag-none-link" href="/tags/c-cpp/" rel="tag">c/cpp</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　在写快排的时候偶然发现了 C++ 数组中的一个坑，具体表现为：对数组元素进行无临时变量的自交换时竟然会将数组该元素置为 0，这应该是 <del>C++ 的一个 BUG</del> Shaun 脑子抽了。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　在写快排的时候偶然发现了 C++ 数组中的一个坑，具体表现为：对数组元素进行无临时变量的自交换时竟然会将数组该元素置为 0，这应该是 <del>C++ 的一个 BUG</del> Shaun 脑子抽了。</p><span id="more"></span><h2 id="交换函数篇">交换函数篇</h2><p>　　据参考资料 [1] 中， C++ 的交换函数可以有如下三种写法：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="C++"><div class="code-copy"></div><figure class="highlight hljs c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种：使用模板，创建临时变量</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span> <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(T &amp;a, T &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">T <span class="title">temp</span><span class="params">(a)</span></span>; a = b; b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种：无临时变量，针对int,double等内建数值类型的基本运算（以double为例）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">double</span> &amp;a, <span class="keyword">double</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	a = a + b;</span><br><span class="line">	b = a - b;</span><br><span class="line">	a = a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种：无临时变量，针对int的异或运算</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;a, <span class="keyword">int</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// a ^= b ^= a ^= b;</span></span><br><span class="line">	a = a ^ b;</span><br><span class="line">	b = b ^ a;</span><br><span class="line">	a = a ^ b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>　　其中，第一种是通用的交换方法，无论做什么交换都能用第一种，但需要创建一个临时对象；而第二种不需要创建一个临时对象，只能用在 int，double 等内建数值类型上，且存在溢出的风险；第三种同样不需要创建临时对象，只能用在 int 类型上，由于采用位运算，所以不存在溢出的风险，且效率最高。</p><h2 id="bug-复现篇">BUG 复现篇</h2><p>　　bug 复现代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="C++"><div class="code-copy"></div><figure class="highlight hljs c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span> <span class="function"><span class="keyword">void</span> <span class="title">swap_1</span><span class="params">(T &amp;a, T &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">T <span class="title">temp</span><span class="params">(a)</span></span>; a = b; b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap_2</span><span class="params">(<span class="keyword">int</span> &amp;a, <span class="keyword">int</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	a = a + b;</span><br><span class="line">	b = a - b;</span><br><span class="line">	a = a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap_3</span><span class="params">(<span class="keyword">int</span> &amp;a, <span class="keyword">int</span> &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	a ^= b ^= a ^= b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> data[] = &#123; <span class="number">0</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">5</span> &#125;;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>;</span><br><span class="line">	swap_1&lt;<span class="keyword">int</span>&gt;(data[a], data[b]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[a], data[b]);	<span class="comment">// 输出 8	3</span></span><br><span class="line">	swap_1&lt;<span class="keyword">int</span>&gt;(data[a], data[a]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[a], data[a]);	<span class="comment">// 输出 8	8</span></span><br><span class="line">	<span class="built_in">swap_2</span>(data[a], data[b]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[a], data[b]);	<span class="comment">// 输出 3	8</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">swap_2</span>(data[a], data[a]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[a], data[a]);	<span class="comment">// ***输出 0	0***</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">swap_3</span>(data[b], data[c]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[b], data[c]);	<span class="comment">// 输出 2	8</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">swap_3</span>(data[b], data[b]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[b], data[b]);	<span class="comment">// ***输出 0	0***</span></span><br><span class="line">	</span><br><span class="line">	std::<span class="built_in">swap</span>(data[<span class="number">4</span>], data[<span class="number">5</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[<span class="number">4</span>], data[<span class="number">5</span>]);	<span class="comment">// 输出 4	9</span></span><br><span class="line">	std::<span class="built_in">swap</span>(data[<span class="number">4</span>], data[<span class="number">4</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\t%d\n&quot;</span>, data[<span class="number">4</span>], data[<span class="number">4</span>]);	<span class="comment">// 输出 4	4</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>　　目前没有找到什么好的解决方案，<strong>只能老老实实的用第一种创建一个临时变量的交换方法</strong>，或者<strong>在交换之前先判断一下是不是同一个元素，若不为同一个元素，才进行交换，否则不交换，即避免自交换</strong>。</p><h2 id="后记">后记</h2><p>　　刚开始出现这个问题的时候，Shaun 还纳闷了，怎么写个快排把数组元素都改变了，刚开始根本没想到这茬，还以为是 Shaun 代码的问题，倒着检查了好几遍，换第一种交换方式以及换个冒泡排序用一样的交换方式进行排序输出结果都没问题，后面使出终极调试法，一个个的输出看看才知道原来是自交换的锅。</p><p>　　如果有大佬知道为什么会出现这个问题还望不吝赐教 ◔ ‸◔?。经 @ <strong>Magnesium12</strong> 大佬提醒，这个问题由于引用引起的，采用第二种方法进行交换时如果两个数是完全一样的（地址也一样），则在进行两数相减时，由于是引用，所以这两个数完全一样，则最后会导致这两个完全一样的数，即自交换的该数置为 0 。</p><h2 id="参考资料">参考资料</h2><p>[1] <a target="_blank" rel="noopener" href="https://blog.csdn.net/ryfdizuo/article/details/6435847">谈谈C++中的swap函数</a></p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-Android开发环境配置" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/cafdd60d.html"><time datetime="2018-06-21T10:17:39.000Z">2018-06-21</time></a></span><section class="article-title article-title--index"><a href="/posts/cafdd60d.html">Android开发环境配置</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color4 article-category-link" href="/categories/Study/">Study</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color3 article-tag-none-link" href="/tags/android/" rel="tag">android</a><a class="color3 article-tag-none-link" href="/tags/java/" rel="tag">java</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><p><font color="#FA8072">由于一些历史原因，本篇配置的 Android 开发环境所需的软件对应版本号为：jdk-7u80-windows-x64、android-studio-bundle-162.4069837-windows（Android Studio 2.3.3 带 Android SDK 版），系统环境为 Win10-1607。</font></p><h2 id="前言">前言</h2><p>　　没想到，时隔两年之后又要重新捡起 Java，还要学基本没怎么做过的 Android，而且还是在这节骨眼上，真是造化弄人 _(´ཀ`」 ∠)_。</p></div><div class="article-content--all"><p><font color="#FA8072">由于一些历史原因，本篇配置的 Android 开发环境所需的软件对应版本号为：jdk-7u80-windows-x64、android-studio-bundle-162.4069837-windows（Android Studio 2.3.3 带 Android SDK 版），系统环境为 Win10-1607。</font></p><h2 id="前言">前言</h2><p>　　没想到，时隔两年之后又要重新捡起 Java，还要学基本没怎么做过的 Android，而且还是在这节骨眼上，真是造化弄人 _(´ཀ`」 ∠)_。</p><span id="more"></span><h2 id="java-环境篇">Java 环境篇</h2><p>　　先在 <a target="_blank" rel="noopener" href="http://www.oracle.com/technetwork/java/archive-139210.html">Oracle Java Archive</a> 下载对应的 Java 版本，下载完成后去 <a target="_blank" rel="noopener" href="https://www.oracle.com/webfolder/s/digest/7u80checksum.html">这里</a> 校验对应的 Hash 值（若是其它 JDK 版本，则只需将 url 末尾的 <code>7u80</code> 改成相应的版本号即可），并安装，安装时需要注意，<em>在安装完 JDK 之后，该安装器还会继续弹出让安装 JRE 的窗口，此时直接点取消即可，因为 JDK 中已包含 JRE ，所以没必要也不需要再继续安装，安装了之后，就相当于有两个 JRE ，还可能会为以后的工作造成一些麻烦</em>。具体系统环境变量配置如下（若没有相应的变量名则新建）：</p><table><colgroup><col style="width:13%"><col style="width:86%"></colgroup><thead><tr class="header"><th>变量名</th><th>变量值</th></tr></thead><tbody><tr class="odd"><td>JAVA_HOME</td><td>C:\Program Files\Java\jdk1.7.0_80 （PS：此为JDK安装目录，后面不能加分隔符分号）</td></tr><tr class="even"><td>CLASSPATH</td><td>.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar; （PS：最前面的 <code>.;</code> 必须要有）</td></tr><tr class="odd"><td>Path</td><td>%JAVA_HOME%\bin;%JAVA_HOME%\jre;</td></tr></tbody></table><p>配置完之后，键入 Win+R ==》cmd ==》 Enter，在终端输入 “java -version”，“java”，“javac” ，这几个命令，若有正确的响应，则表示配置成功。</p><h2 id="android-篇">Android 篇</h2><p><strong>※注：</strong> <em>在安装和配置 Android Studio 时最好先自行找好梯子，这其中有一些步骤可能需要连接外网</em>。</p><p>　　自然还是先在<a target="_blank" rel="noopener" href="http://www.android-studio.org/index.php/download/hisversion">这里</a>（<a target="_blank" rel="noopener" href="http://www.android-studio.org/" class="uri">http://www.android-studio.org/</a>）下载安装 Android Studio ，为避免再下载安装配置 SDK 的麻烦，推荐直接下载带 SDK 版本的 Android Studio 。直接默认安装，其中安装 SDK 的时间略长。<em>安装完成之后，推荐把 SDK 目录下的 tools 和 platform-tools 子目录也添加到系统的 PATH 环境变量中</em>。</p><p>　　在第一次打开 Android Studio 的时候，可能需要连接外网以更新 SDK ，所以需要自行设置好代理，更新又要花一段时间 ╮(╯▽╰)╭，当然也可以选择不更新，不更新的办法为：</p><blockquote><p>在AS启动前，打开安装目录，请先将bin目录的idea.properties文件中增加一行：disable.android.first.run=true就行了，避免第一次打开AS时自动重新下载SDK。</p></blockquote><p>　　第一次运行时，首先需要配置 SDK 路径和 JDK 路径，配置 SDK 路径方法为：“Configure” —&gt; “SDK Manager”，编辑 “Android SDK location” ，其会自动找到安装的 SDK 路径；配置 JDK 路径方法为：“Configure” —&gt; “Project Defaults” —&gt; “Project Structure”，编辑 “JDK location”（这里它有个默认内置的 jre，但推荐还是使用自己的 JDK）。</p><p>　　Android Studio 默认的编辑器方案无法更改字体（若真想在默认的方案上更改字体，可以先将其另存为一个新方案），而且个人认为其默认的主题（配色，字体等）不好看，所以推荐自行去 <a target="_blank" rel="noopener" href="http://color-themes.com/?view=index">Color Themes</a> 选择合适的主题。最终 Shaun 选择 <a target="_blank" rel="noopener" href="http://color-themes.com/?view=theme&amp;id=563a1a6480b4acf11273ae48">Wombat</a> 主题。至于导入主题的方法为：“Configure” —&gt; “Import Settings”，将下载好的 jar 包导入即可。</p><p>　　为了测试方便，就直接装了个 <a target="_blank" rel="noopener" href="http://mumu.163.com/">网易MuMu模拟器</a> ，用起来感觉还可以，至于 Android Studio 连接 MuMu 模拟器的方法为：先打开 MuMu 模拟器，在 Android Studio 底下的 <strong>Terminal（终端）</strong> 中输入命令：<code>adb connect 127.0.0.1:7555</code> ，响应 <code>connected to 127.0.0.1:7555</code> 则说明连接成功，这时就能愉快的使用 MuMu 模拟器调试 Android app 了。</p><h2 id="后记">后记</h2><p>　　以后有碰到什么坑再继续记录吧 ╮(╯▽╰)╭。</p><h2 id="参考资料">参考资料</h2><p>[1] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/yanglh6-jyx/p/Android_AS_Configuration.html">Android Studio安装配置、环境搭建详细步骤及基本使用</a></p><p>[2] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/smyhvae/p/4390905.html">第一次使用Android Studio时你应该知道的一切配置</a>（<a target="_blank" rel="noopener" href="http://www.cnblogs.com/smyhvae/category/587732.html" class="uri">http://www.cnblogs.com/smyhvae/category/587732.html</a>）</p><p>[3] <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35605213/article/details/80241641">Android Studio连接不到MuMu模拟器</a></p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-Windows实用技巧" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/27a4c8b6.html"><time datetime="2018-06-06T02:50:42.000Z">2018-06-06</time></a></span><section class="article-title article-title--index"><a href="/posts/27a4c8b6.html">Windows实用技巧</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color1 article-category-link" href="/categories/Share/">Share</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color4 article-tag-none-link" href="/tags/record/" rel="tag">record</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　本篇主要用来记录在 Windows 下使用命令行能做到的一些特殊技巧。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　本篇主要用来记录在 Windows 下使用命令行能做到的一些特殊技巧。</p><span id="more"></span><h2 id="windows-粉碎文件技巧">Windows 粉碎文件技巧</h2><p>　　有时候 Windows 下会莫名出现文件无法删除的现象，即使通过 Shift+Delete 组合键也还是无法删除，这时可能需要通过一种 “文件粉碎机” 的工具才能删除，但是为了偶尔出现的这种现象而安装一个这样的工具又略显麻烦，这时只需要新建一个 Windows 批处理文件，即新建一个 txt 文本文件，并将后缀改为 .bat 即可，文件内容输入：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BAT"><div class="code-copy"></div><figure class="highlight hljs bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">DEL</span> /F /A /Q \\?\%<span class="number">1</span></span><br><span class="line"><span class="built_in">RD</span> /S /Q \\?\%<span class="number">1</span></span><br></pre></td></tr></table></figure></div><p>其中</p><blockquote><p><strong>DEL 表示删除文件，命令参数为： del /?</strong></p><p>/F：表示强制刪除</p><p>/A：选择文件的属性</p><p>/Q：静默模式，在删除时不会弹出提示信息</p><p><strong>RD 表示刪除目录，命令参数为： rd /?</strong></p><p>/S：连带删除子目录下的文件</p><p>/Q：静默模式，在删除时不会弹出提示信息</p></blockquote><p>　　具体用法为将待删除的文件拖拽到该 .bat 文件图标上，用该 .bat 文件打开待删除的文件即可。</p><p>　　但有时候即使使用上面的方法，也无法删除文件，同时还会弹出“无法删除文件，文件或目录损坏且无法读取”这样的提示，这可能是文件存储时发生错误造成的，此时需要在 Windows 命令提示符界面中输入命令 <code>CHKDSK 盘符:/F</code>，盘符为需要删除的文件所在的磁盘或 U 盘，比如在 D 盘，则输入命令 <code>CHKDSK D:/F</code>，如出现无法锁定的提示信息，则输入 <code>Y</code> 强制卸载该卷，等待一段时间，等磁盘扫描和修复完成后即可删除待删除的文件。</p><h2 id="windows-校验文件技巧">Windows 校验文件技巧</h2><p>　　为确保从网络上下载的文件为原文件，一般需要对其进行 hash 校验（如 SHA1、SHA256、SHA384、SHA512、MACTripleDES、MD5、RIPEMD160 值等），一般随原文件一起释放的比较常见的 hash 值有 SHA1、SHA256 或 MD5 等，但是为了校验下载文件的 hash 值可能需要专门的第三方工具，但其实 Windows 、Linux 和 macOS 都自带了校验 hash 值的命令，通过这些命令可以直接对文件的 hash 值进行校验，而不需要使用额外的第三方工具，这里只介绍 Windows 的哈希值校验命令，其命令为 <code>Get-FileHash</code>，具体使用方法如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BASH"><div class="code-copy"></div><figure class="highlight hljs bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># []内为待校验的文件 和 所用的hash算法</span></span><br><span class="line">Get-FileHash [文件路径及名称] -Algorithm [校验的Hash值类型]| Format-List</span><br></pre></td></tr></table></figure></div><p>　　如果觉得每次这样输入比较麻烦，可以使用<strong>参考资料[2]</strong>提供的注册表文件（.reg 后缀），双击运行，即可在鼠标右键菜单添加「文件哈希校验」，如此可以通过鼠标右键直接对文件进行 hash 校验。附其中代码如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\文件哈希校验]</span><br><span class="line"></span><br><span class="line">&quot;SubCommands&quot;=&quot;MACTripleDES;MD5;RIPEMD160;SHA1;SHA256;SHA384;SHA512&quot;</span><br><span class="line"></span><br><span class="line">&quot;MUIVerb&quot;=&quot;文件哈希校验&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\MACTripleDES]</span><br><span class="line"></span><br><span class="line">@=&quot;MACTripleDES&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\MACTripleDES\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm MACTripleDES \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\MD5]</span><br><span class="line"></span><br><span class="line">@=&quot;MD5&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\MD5\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm MD5 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\RIPEMD160]</span><br><span class="line"></span><br><span class="line">@=&quot;RIPEMD160&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\RIPEMD160\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm RIPEMD160 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA1]</span><br><span class="line"></span><br><span class="line">@=&quot;SHA1&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA1\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm SHA1 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA256]</span><br><span class="line"></span><br><span class="line">@=&quot;SHA256&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA256\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm SHA256 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA384]</span><br><span class="line"></span><br><span class="line">@=&quot;SHA384&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA384\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm SHA384 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA512]</span><br><span class="line"></span><br><span class="line">@=&quot;SHA512&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\SHA512\command]</span><br><span class="line"></span><br><span class="line">@=&quot;PowerShell Get-FileHash -Algorithm SHA512 \\\&quot;%1\\\&quot; | format-list;“按任意键退出...”;[Console]::Readkey() | Out-Null;exit&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h2 id="windows-隐写文件技巧">Windows 隐写文件技巧</h2><p>　　在 Windows 下可以通过 <code>copy</code> 命令实现简单的文件合并，即隐写，例如：将压缩文件隐写入 jpg 文件中，将 txt 文件隐写入 jpg 文件中。这样在没改后缀名的情况下，该文件是以图片形式存在，若要恢复原有隐写文件信息，则只需要将 jpg 后缀名更改为相应文件后缀名，例如：若隐写的是 rar 文件，则只需将后缀名 .jpg 改为 .rar ，再用解压缩软件打开即可，也可以直接用解压缩软件打开相应 jpg 文件；若隐写的是 txt 文件，则需要用记事本打开该文件，通过 ctrl+end 组合键让光标定位到文件最末尾，即可看到隐写的 txt 文件内容。</p><p>具体命令如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BASH"><div class="code-copy"></div><figure class="highlight hljs bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 b.txt 隐写进 a.jpg 中，并输出为 c.jpg</span></span><br><span class="line">copy/b a.jpg+b.txt c.jpg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前目录下 2.rar 隐写进 1.jpg 中，并输出为 3.jpg</span></span><br><span class="line">copy /b ./1.jpg + ./2.rar ./3.jpg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 b.txt 隐写进 a.jpg 中，并输出为 c.jpg</span></span><br><span class="line">copy a.jpg /b + b.txt /a c.jpg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 b.rar 隐写进 a.jpg 中，并输出为 c.jpg</span></span><br><span class="line">copy a.jpg /b + b.rar c.jpg</span><br></pre></td></tr></table></figure></div><p><em>※注：图片文件要放在前面，需要隐写的信息放在后面，不然输出的图片无法正常查看和显示</em>。</p><p>　　其中参数 <code>/b</code> 表示以二进制格式复制、合并文件，在合成图片和压缩文件等二进制文件时必须使用该参数，不然会丢失信息，从而造成合成失败，当然合成 txt 文本文件时也可以使用该参数；参数 <code>/a</code> 表示以 ASCII 码格式复制、合并文件，参数 <code>/a</code> 只适用于 txt 文本文件合并。</p><p>　　至于其它需要注意的就是：<em>1、要合成的两个文件最好放在同一目录下，不然输入路径有点麻烦； 2、txt 文本文件前面最好空三行，这样它头部的内容就不会丢失</em>。</p><p>　　输出的图片 c.jpg 和原图片 a.jpg 显示是一样的，看起来就是同一张图片，因此达到隐写的目的。</p><h2 id="win10-开启休眠方法">Win10 开启休眠方法</h2><p>　　不知道巨硬是怎么肥事，居然 Win10 中默认电源选项中没有「休眠」选项，需要手动开启。虽然睡眠和休眠有重叠的地方，但是休眠是完全关机，再次开机时会恢复原有工作状态，更多的情况是必须要关机（因为需要考虑电量情况），相反如果有充足电力的情况下，还不如使用锁定代替睡眠，从这里的需求看还不如在默认电源选项中去掉「睡眠」选项。好了，抱怨吐槽的话就说这么多了，具体开启「休眠」的方法为：只需要在命令行（需要以管理员身份打开「命令提示符」）中输入一下命令：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BAT"><div class="code-copy"></div><figure class="highlight hljs bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powercfg /H on</span><br></pre></td></tr></table></figure></div><p>回车 执行即可在电源选项中发现「休眠」选项。</p><h2 id="windows-新建用户命令">Windows 新建用户命令</h2><p>　　前一段时间电脑系统升级之后崩了，资源管理器损坏，没有任务栏，没有桌面，Win 键都无法使用，还好可以使用任务管理器，通过任务管理器调出 cmd，输入以下命令新建一个用户：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BASH"><div class="code-copy"></div><figure class="highlight hljs bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加用户tmp、密码123  </span></span><br><span class="line">net user tmp 123 /add  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 设置tmp为管理员  </span></span><br><span class="line">net localgroup administrators tmp /add  </span><br></pre></td></tr></table></figure></div><p>　　通过 tmp 用户可以正常使用电脑，因此猜测应该是原来的用户系统配置文件（例如注册表文件，系统设置文件等等）损坏。系统损坏之后捣鼓了两天，这没办法修复了，即使新建用户也还是有些软件没法使用，还不如直接重装系统（系统出现问题果然重装系统才是最快的解决方案），还好可以新建用户以备份原有系统盘文件，不然就是真 gg 了。既然新建命令记录了，也顺便记录一下删除命令吧，删除用户 tmp 命令为：<code>net user tmp /del</code> 。</p><h2 id="windows-解除-u盘或移动移动硬盘被占用技巧">Windows 解除 U盘或移动移动硬盘被占用技巧</h2><p>　　Windows 在弹出 U盘或移动硬盘时，有时会出现 “该设置正在使用中，请关闭可能使用该设备的所有程序或窗口，然后重试。” 的提示，导致 弹出 USB 大容量存储设备时出现问题，无法弹出。解决该问题需要知道是那个或哪些程序占用该存储设备，然后结束该进程即可。查看存储设备占用程序 Shaun 知道的有两种方法：</p><ol type="1"><li>通过 “Windows 日志”。Windows 每次弹窗提示都会有相应的日志，右键计算机 ==》管理 ==》事件查看器 ==》Windows日志 ==》系统，然后在窗口左侧查找其中有黄色警告的日志信息，找到来源为 <em>Kernel-PnP</em> 的日志，双击该日志即可看到 “进程 ID 为 XXX 的应用程序 XXX 已停止删除或弹出设备 XXX。” 之类的信息，从而知道是哪个进程占用该存储设备，停止该进程即可正常弹出。停止进程一般通过 任务管理器 ==》详细信息，找到对应的 名称 和 PID，右键 ==》结束任务即可。</li><li>通过 “资源监视器”。右键计算机 ==》管理 ==》性能，打开资源监视器。然后在 “CPU” 栏中找到 “关联的句柄”，在后面的搜索栏中输入存储设备的盘符（D: 、E: 或 F: 等 ），即可显示占用程序的 名称 和 PID，随后在任务管理器中停止该进程即可。</li></ol><p>　　<strong><em>※注：</em></strong> 有时只有 System 进程阻止存储设备弹出，这时可以直接关机了 :），因为 System 进程是系统核心进程，不能结束，结束之后系统会崩溃，并自动关机。当然，如果是其他进程阻止，可以用上述方法正常弹出，一般阻止存储设备弹出的都是 explorer.exe，在停止该进程后，Windows 的任务栏将会消失，所以需要在任务管理器中重新运行该任务（任务管理器 ==》文件 ==》运行新任务， 输入 “explorer” 即可）。</p><h2 id="后记">后记</h2><p>　　如果以后碰到更多有意思的小技巧再继续和大家分享吧 ↖(^ω^)↗。</p><h2 id="参考资料">参考资料</h2><p>[1] <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a86d89c78d33">windows文件夹删不掉怎么办</a></p><p>[2] <a target="_blank" rel="noopener" href="https://www.windows10.pro/right-click-menu-verifying-hash-value/">巧在Win10右键菜单添加校验文件Hash值命令（MD5、SHA1/256等）</a></p><p>[3] <a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/72ee561a865508e16138df05.html">【命令行copy命令】将txt文档与jpg图片合并</a></p><p>[4] <a target="_blank" rel="noopener" href="https://answers.microsoft.com/zh-hant/windows/forum/windows_10-start-winpc/%E5%8D%87%E7%B4%9Awin10%E5%BE%8C%E7%82%BA%E4%BD%95/081e227d-a97e-4319-a726-1c1ded999d02">升級Win10後，為何筆電專有的休眠選項消失了</a></p><p>[5] <a target="_blank" rel="noopener" href="https://blog.csdn.net/scimence/article/details/47803873">CMD命令（添加删除管理员账户）</a></p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><article id="post-FFmpeg提取与合并命令使用小结" class="article div-border"><header class="article-header"><span class="article-date article-title--index"><i class="fa fa-calendar" aria-hidden="true"></i> <a href="/posts/6315717b.html"><time datetime="2018-05-28T13:19:07.000Z">2018-05-28</time></a></span><section class="article-title article-title--index"><a href="/posts/6315717b.html">FFmpeg提取与合并命令使用小结</a></section><div class="article-label"><div class="article-category label"><i class="fa fa-book" aria-hidden="true"></i> <a class="color4 article-category-link" href="/categories/Study/">Study</a></div><div class="article-tag label"><i class="fa fa-bookmark" aria-hidden="true"></i> <a class="color1 article-tag-none-link" href="/tags/ffmpeg/" rel="tag">ffmpeg</a></div></div></header><section class="article-content"><div class="article-content--excerpt"><h2 id="前言">前言</h2><p>　　前面有一段时间需要对视频做一些简单的处理，所以就去查了一下一些常用的视频处理工具，因为不想再另外装个什么软件，所以就决定直接采用 <a target="_blank" rel="noopener" href="https://www.ffmpeg.org/">FFmpeg</a> 了，毕竟其它的一些视频处理软件也极有可能只是对 FFmpeg 进行一些图形化界面的封装而已。</p></div><div class="article-content--all"><h2 id="前言">前言</h2><p>　　前面有一段时间需要对视频做一些简单的处理，所以就去查了一下一些常用的视频处理工具，因为不想再另外装个什么软件，所以就决定直接采用 <a target="_blank" rel="noopener" href="https://www.ffmpeg.org/">FFmpeg</a> 了，毕竟其它的一些视频处理软件也极有可能只是对 FFmpeg 进行一些图形化界面的封装而已。</p><span id="more"></span><p>　　而在查找 FFmpeg 相关资料的时候，也同时发现了 <a target="_blank" rel="noopener" href="https://www.libav.org/">Libav</a> ， 对于 FFmpeg 和 Libav Shaun 只想说，开源界的战争总是这么莫名其妙，有各种各种一些奇怪的原因（或许大佬们都是各有各的脾性吧 ╮(╯▽╰)╭），像两个小飞机的战争也是如此，不过神仙打架，凡人享福也好 ~\(≧▽≦)/~。神仙们的想法我等凡人是无法揣测了，不过这种事还是少出点为好，不然下次变为小鬼遭殃就不好了。</p><p>　　使用 FFmpeg 而不是 Libav 是因为 FFmpeg 的相关资料相对来说要多很多；而且Libav 更新的特性，FFmpeg 全都支持；更重要的是 FFmpeg 是更新特别频繁，差不多是日更了，几乎每天都会发布一个稳定版；而且从两者的下载页面来看， FFmpeg 好像更会照顾跨平台用户一点。下文主要是对 FFmpeg 的部分命令进行记录总结。</p><p><em>Shaun 的系统环境为 Win10 1607，测试的 FFmpeg 版本为 ffmpeg-20180429-19c3df0-win64-static</em>。</p><p>　　在 Win10 下使用 FFmpeg 前首先需要配置系统环境变量，Windows 下 FFmpeg 的安装是下载完 Windows 版编译好的 FFmpeg 压缩包后直接解压即可，<strong>将解压后的 FFmpeg 文件夹中的 bin 目录添加到系统环境变量 Path 中</strong>，不然系统会无法找到 ffmpeg 命令。</p><h2 id="提取命令">提取命令</h2><p>　　FFmpeg 的提取命令的参数很多，因此可以使用不同参数排列组合达到不同的提取效果，具体如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BASH"><div class="code-copy"></div><figure class="highlight hljs bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># （1）快速提取video.mp4从第一分钟开始持续两分钟的视频，即到第三分钟，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -ss 00:01:00 -i video.mp4 -to 00:02:00 -c copy cut.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># （2）快速提取video.mp4从第一分钟开始持续两分钟的视频，即到第三分钟，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -ss 00:01:00 -i video.mp4 -t 00:02:00 -c copy cut.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># （3）快速提取video.mp4从第一分钟开始到第二分钟的视频，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -ss 00:01:00 -i video.mp4 -to 00:02:00 -c copy -copyts cut.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># （4）精确提取video.mp4从第一分钟开始到第二分钟的视频，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -i video.mp4 -ss 00:01:00 -to 00:02:00 -c copy cut.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># （5）精确提取video.mp4从第一分钟开始持续两分钟的视频，即到第三分钟，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -i video.mp4 -ss 00:01:00 -t 00:02:00 -acodec copy -vcodec copy cut.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># （6）快速提取video.mp4从第三分钟开始持续60秒的视频，即到第四分钟，并将提取结果输出为cut.mp4</span></span><br><span class="line">ffmpeg -ss 00:03:00 -i video.mp4 -t 60 -c copy -avoid_negative_ts 1 cut.mp4</span><br></pre></td></tr></table></figure></div><p>以下为各参数的含义：</p><ul><li><code>-i</code>：用法为 <code>-i INPUT_VIDEO</code>，代表输入的视频，该视频应为 MPEG 编码（h.264, MPEG4/divx/xvid, MPEG2; MP2, MP3, AAC） ；</li><li><code>-ss</code>：用法为 <code>-ss START_TIME</code>，代表提取的开始时间，时间格式有两种写法：1、纯数字格式，以秒为单位（eg: <code>-ss 90</code>，代表从第90秒开始提取）；2、时:分:秒 格式（eg: <code>-ss 00:01:30</code>，代表从 0 时 1 分 30 秒开始提取）；</li><li><code>-to</code>：用法为 <code>-to STOP_TIME</code>，代表提取的结束时间，时间格式同样有两种写法：1、纯数字格式，以秒为单位（eg: <code>-to 180</code>，代表第180秒结束提取）；2、时:分:秒 格式（eg: <code>-to 00:03:00</code>，代表 0 时 3 分 00 秒结束提取）；</li><li><code>-t</code>：用法为 <code>-t DURATION_TIME</code>，代表提取的持续时间，时间格式同样有两种写法：1、纯数字格式，以秒为单位（eg: <code>-to 180</code>，代表提取持续180秒）；2、时:分:秒 格式（eg: <code>-to 00:03:00</code>，代表提取持续 0 时 3 分 00 秒）；</li><li><code>-c</code>：用法为 <code>-c CODEC</code>，代表音视频编码格式（若 CODEC 为 <code>copy</code> 则代表输出视频的音视频编码格式与原视频一样），其实 <code>-c</code> 是 <code>-codec</code> 的缩写，其中包含音频编码参数 <code>-acodec</code> 和 视频编码参数 <code>-vcodec</code> ；</li><li><code>-copyts</code>：保持原有时间戳，即使当 <code>-ss</code> 在 <code>-i</code> 之前时，仍使 <code>-t</code> 和 <code>-to</code> 保持原有效果，不会被同化；</li><li><code>-avoid_negative_ts</code>：当开启该参数时，提取视频会找到首尾的相邻关键帧（这样会造成提取时间不精确），补全视频，当 <code>-ss</code> 在 <code>-i</code> 之前时该参数默认开启；</li><li><code>-accurate_seek</code>：使提取时间更精确，在转码时该参数默认启用。</li><li>更多参数可参考：<a target="_blank" rel="noopener" href="https://ffmpeg.org/ffmpeg-all.html#Format-Options">Format-Options</a> 。</li></ul><p><strong>※注：</strong> 1、<code>-t</code> 和 <code>-to</code> 不能同时使用，若同时使用，将以 <code>-t</code> 为准；　　2、当 <code>-ss</code> 在 <code>-i</code> 之前时，可以实现快速提取，但提取的时间点不精确，此时<code>-to</code> 和 <code>-t</code> 的效果一样，都表现为 <code>-t</code> ，此时可以加上 <code>-copyts</code> 参数使两者效果不一样；　　3、当 <code>-ss</code> 在 <code>-i</code> 之后时，提取的时间点比较精确，但提取速度比较慢。</p><p>　　以上命令（1）、（2）是一样的提取结果，命令（3）的 <code>-t</code> 和 <code>-to</code> 会产生不一样的结果，（6）的 <code>-t</code> 和 <code>-to</code> 会产生一样的结果。<strong>因此若只考虑速度，可以使用命令（3），若需使提取时间精确，则需使用命令（4）和（5）</strong>。</p><p><strong>PS：</strong>当然还有一种更精确的方式，通过命令 <code>ffmpeg -i input.mp4 -strict -2 -qscale 0 -intra output.mp4</code> 将输入视频由原来的帧间编码转换为帧内编码，使每一帧都成为关键帧，如此转换之后再进行提取，可使提取时间十分精确，但该转换方式会造成视频文件空间成倍增大。</p><h2 id="合并命令">合并命令</h2><p>　　FFmpeg 的合并命令大概有 4 种，可参考： <a target="_blank" rel="noopener" href="https://blog.csdn.net/doublefi123/article/details/47276739">FFMpeg无损合并视频的多种方法</a> 。这里主要介绍两种：</p><h3 id="方法一使用-ffmpeg-concat-分离器推荐">方法一：使用 FFmpeg concat 分离器（推荐）</h3><p>　　该方法使用命令为：<code>ffmpeg -f concat -i filelist.txt -c copy output.mp4</code>，其中 filelist.txt 文件最好和待合并的视频在同一个文件夹中，文件中内容就是待合并的视频的描述，具体内容如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file &#x27;input1.mp4&#x27;</span><br><span class="line">file &#x27;input2.mp4&#x27;</span><br></pre></td></tr></table></figure></div><p>或</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="PLAINTEXT"><div class="code-copy"></div><figure class="highlight hljs plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file ./input1.mp4</span><br><span class="line">file ./input2.mp4</span><br></pre></td></tr></table></figure></div><p><strong>※注：</strong> <em>待合并的视频文件名最好由英文、数字、连接符（<code>-</code>）或下划线（<code>_</code>）组成，且中间最好不要有空格，不然可能会因为文件名而在合并时出现一些奇怪的错误</em>。</p><h3 id="方法二利用中间格式合并">方法二：利用中间格式合并</h3><p>　　所谓利用中间格式进行合并是因为可能有些待合并的视频编码不一致，这时采用方法一可能无法进行合并，这时需要对待合并的视频的进行统一转码，都转成同一个编码格式。若要采用这种方法，建议都转成 mpg 格式，因为 mpg 格式可以直接 cat 命令进行合并，具体如下：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-lang="BASH"><div class="code-copy"></div><figure class="highlight hljs bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将input1.avi转成intermediate1.mpg,输出视频质量为1</span></span><br><span class="line">ffmpeg -i input1.avi -qscale:v 1 intermediate1.mpg</span><br><span class="line"><span class="comment"># 将input2.mp4转成intermediate2.mpg,输出视频质量为1</span></span><br><span class="line">ffmpeg -i input2.mp4 -qscale:v 1 intermediate2.mpg</span><br><span class="line"><span class="comment"># 合并intermediate1.mpg和intermediate2.mpg，输出合并结果intermediate_all.mpg</span></span><br><span class="line">cat intermediate1.mpg intermediate2.mpg &gt; intermediate_all.mpg</span><br><span class="line"><span class="comment"># 将intermediate_all.mpg转成output.avi,输出视频质量为2</span></span><br><span class="line">ffmpeg -i intermediate_all.mpg -qscale:v 2 output.avi</span><br></pre></td></tr></table></figure></div><p>　　其中参数 <code>-qscale</code> 是指使用固定的视频量化标度 ，取值范围为 0.01 ~ 255 ，越小代表质量越好，一般推荐取值为 2 ~ 5，实际使用不能超过 50， <code>-qscale:v</code> 代表设置视频输出质量。</p><p><strong>PS：</strong> <em>方法一为无损合并，方法二为有损合并</em>。</p><h2 id="后记">后记</h2><p>　　以后有用到新的命令再继续记录吧 ↖(^ω^)↗ 。纯命令行不太方便的话，可以试试 <a target="_blank" rel="noopener" href="http://avidemux.sourceforge.net/download.html">Avidemux</a>，全平台通用。</p><h2 id="参考资料">参考资料</h2><p>[1] <a target="_blank" rel="noopener" href="https://ffmpeg.org/ffmpeg.html">ffmpeg Documentation</a>（<a target="_blank" rel="noopener" href="https://ffmpeg.org/documentation.html" class="uri">https://ffmpeg.org/documentation.html</a>）</p><p>[2] <a target="_blank" rel="noopener" href="http://trac.ffmpeg.org/wiki/Seeking">FFmpeg wiki: Seeking</a>（<a target="_blank" rel="noopener" href="http://trac.ffmpeg.org/wiki" class="uri">http://trac.ffmpeg.org/wiki</a>）</p><p>[3] <a target="_blank" rel="noopener" href="http://fzheng.me/2016/01/08/ffmpeg/">FFmpeg：视频转码、剪切、合并、播放速调整</a></p><p>[4] <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000000414341">通过 ffmpeg 无损剪切/拼接视频</a></p><p>[5] <a target="_blank" rel="noopener" href="https://blog.csdn.net/u012587637/article/details/51670975">使用ffmpeg合并视频文件的三种方法</a></p></div><div class="article-content-more"><button type="button" class="article-more--link"><i class="fa fa-angle-double-down fa-3x" aria-hidden="true"></i></button></div></section></article><nav id="pagination--nav" class="text-center"><a class="extend prev" rel="prev" href="/page/3/">&lt;&lt; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/">Next &gt;&gt;</a></nav></main><div id="site-tool"><div class="scroll"><a href="#header"><i class="fa fa-arrow-up"></i></a> <a href="#footer"><i class="fa fa-arrow-down"></i></a></div><div></div></div><aside id="right-col" class="col-lg-3 col-sm-12"><div id="sidebar-sticky--bottom"></div><div id="sidebar"><header class="author-info div-border"><a href="/"><img class="header-avatar" src="/img/avatar.jpg"></a><h1 class="header-author"><a href="/" title="Hi Mate" data-toggle="tooltip">Shaun</a></h1><p class="header-slogan">求知！ 视界！ 未来！ ↖(^ω^)↗</p><div class="social-info"><a class="social-icon" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=qNvAyd3G0d3JxujOx9DFycHEhsvHxQ" title="envelope" data-toggle="tooltip"><i class="fa fa-envelope" aria-hidden="true"></i> </a><a class="social-icon" target="_blank" href="https://github.com/cniter" title="github" data-toggle="tooltip"><i class="fa fa-github" aria-hidden="true"></i> </a><a class="social-icon" target="_blank" href="/atom.xml" title="rss" data-toggle="tooltip"><i class="fa fa-rss" aria-hidden="true"></i> </a><a class="social-icon" target="_blank" href="http://sighttp.qq.com/authd?IDKEY=4faf682653b3b7f5f47b9cb6d2bb8b81de8fa7a8fb8cee12" title="qq" data-toggle="tooltip"><i class="fa fa-qq" aria-hidden="true"></i></a></div></header><div class="search div-border" title="搜索" data-toggle="tooltip"><form id="search-form"><input type="text" id="local-search--input" name="q" results="0" placeholder=" Search..." autocomplete="off" autocorrect="off"> <i class="fa fa-times" onclick="resetSearch()"></i></form><div id="local-search--result"></div><p class="no-result">No results found</p></div><div id="tagcloud" class="tagcanvas div-border" title="标签" data-toggle="tooltip"><canvas width="200" height="200" id="tagcloud-canvas"><p>Anything in here will be replaced on browsers that support the canvas element</p><ul><li><a href="/tags/algorithm/" data-weight="7">algorithm</a></li><li><a href="/tags/android/" data-weight="2">android</a></li><li><a href="/tags/bigdata/" data-weight="2">bigdata</a></li><li><a href="/tags/c-cpp/" data-weight="6">c/cpp</a></li><li><a href="/tags/clustering/" data-weight="1">clustering</a></li><li><a href="/tags/container/" data-weight="1">container</a></li><li><a href="/tags/css/" data-weight="1">css</a></li><li><a href="/tags/cv/" data-weight="5">cv</a></li><li><a href="/tags/devtool/" data-weight="1">devtool</a></li><li><a href="/tags/ffmpeg/" data-weight="1">ffmpeg</a></li><li><a href="/tags/geomesa/" data-weight="1">geomesa</a></li><li><a href="/tags/geometry/" data-weight="4">geometry</a></li><li><a href="/tags/gfw/" data-weight="1">gfw</a></li><li><a href="/tags/github/" data-weight="1">github</a></li><li><a href="/tags/gl/" data-weight="1">gl</a></li><li><a href="/tags/golang/" data-weight="1">golang</a></li><li><a href="/tags/hexo/" data-weight="8">hexo</a></li><li><a href="/tags/integration/" data-weight="1">integration</a></li><li><a href="/tags/java/" data-weight="2">java</a></li><li><a href="/tags/k8s/" data-weight="1">k8s</a></li><li><a href="/tags/language/" data-weight="3">language</a></li><li><a href="/tags/latex/" data-weight="1">latex</a></li><li><a href="/tags/mapbox/" data-weight="1">mapbox</a></li><li><a href="/tags/markdown/" data-weight="1">markdown</a></li><li><a href="/tags/matlab/" data-weight="2">matlab</a></li><li><a href="/tags/network/" data-weight="1">network</a></li><li><a href="/tags/note/" data-weight="7">note</a></li><li><a href="/tags/numerical/" data-weight="1">numerical</a></li><li><a href="/tags/opencv/" data-weight="11">opencv</a></li><li><a href="/tags/opendrive/" data-weight="1">opendrive</a></li><li><a href="/tags/opengl/" data-weight="1">opengl</a></li><li><a href="/tags/python/" data-weight="1">python</a></li><li><a href="/tags/qt/" data-weight="2">qt</a></li><li><a href="/tags/record/" data-weight="13">record</a></li><li><a href="/tags/search/" data-weight="1">search</a></li><li><a href="/tags/segmentation/" data-weight="2">segmentation</a></li><li><a href="/tags/tensorflow/" data-weight="1">tensorflow</a></li><li><a href="/tags/thought/" data-weight="3">thought</a></li><li><a href="/tags/unix-like/" data-weight="3">unix-like</a></li><li><a href="/tags/vscode/" data-weight="1">vscode</a></li></ul></canvas><script src="/plugins/TagCanvas/jquery.tagcanvas.min.js" type="text/javascript"></script><script type="text/javascript">$(document).ready((function(){$("#tagcloud-canvas").tagcanvas({initial:[.1,-.1],activeCursor:'url("/img/cursor/link.cur"), auto',reverse:!0,depth:.75,weight:!0,weightFrom:"data-weight",weightMode:"both",weightSizeMin:15,weightSizeMax:50})||$("#tagcloud").hide()}))</script></div><div class="friends div-border" title="友链" data-toggle="tooltip"><a target="_blank" class="friends-link" href="https://cniter.github.io">Shaun&#39;s Space</a></div><div class="revolvermaps div-border" title="访客" data-toggle="tooltip"><script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=50om5cdoa3h&amp;m=7&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=49" defer></script></div></div><div class="toc-card"><div class="toc-card--head"><i class="fa fa-angle-up" aria-hidden="true"></i></div><div id="toc" class="toc-card--content"><strong class="toc-title">文章列表</strong><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/2eb69b33.html">记一次资源不释放的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/dbbe01e5.html">社畜三年，风雨兼程</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/8e1d1e1d.html">2021 年小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/4b1f50ff.html">M1 个人配置</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/9c9b4035.html">Scala 多线程编程小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/720275bd.html">Google S2 Geometry 浅解</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/55e674ff.html">K8S 应用开发指北</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/81321445.html">OpenGL坐标系统与渲染管线</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/8d3d87a2.html">Scala 学习小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/28416d7c.html">2020年小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/b59e3e7b.html">Linux服务器运维文档</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/489fa7b3.html">时空查询之ECQL</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/9978824c.html">GeoMesa踩坑指北</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3692cd6.html">IDEA使用Docker环境开发调试</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/af5e9ace.html">大数据环境搭建笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/ae780057.html">设计模式浅谈</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/eee1c041.html">积分计算</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/a5661762.html">Geometry增量更新</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/e225d8fd.html">Mapbox显示GeoServer地图</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3d8ab974.html">Docker使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/6694a214.html">空间中三角形与三角形相交</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/5315fcfd.html">计算几何基础</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/b7d79231.html">OpenDrive解析小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/39a3c99e.html">一张纹理做天空盒</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/a250bb21.html">Windows Terminal 尝鲜小记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/ae5f9dce.html">读大学</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/cf97ba7c.html">2019，既是结束又是开始</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/ff29de94.html">快速判断三角形与长方体相交</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/70a807da.html">网页菜单纯 css 实现</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/abe58f8c.html">个人游记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/26d437be.html">hexo-theme-chi主题更新小记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3578e309.html">［译］为什么深度学习没有取代传统的计算机视觉</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/37b89a23.html">再也不见，18年</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/ac4679b5.html">hexo-theme-chi主题开发小记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/64889158.html">Matlab和OpenCV混合编程小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/be7949e4.html">Android实践小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/fc1165b7.html">C++数组中的坑</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/cafdd60d.html">Android开发环境配置</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/27a4c8b6.html">Windows实用技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/6315717b.html">FFmpeg提取与合并命令使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/fd823bf9.html">解决VSCode使用Cmder作为默认终端问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/fddd1e17.html">图割算法之NCuts浅见</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/c42ff8d4.html">图割算法之Graph Cuts浅见</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/b93d943b.html">C++中static用法小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/8fb9f004.html">斐波那契数列的三种写法</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/bcdf334e.html">LaTex语法指北</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/982ff584.html">搜索技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/7cebf0ee.html">17年走了，18年来了</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/e124baa1.html">矩阵的应用之图像仿射变换</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/aef52be2.html">本人常用小工具安利</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/376168c6.html">解决无法打开某个网页问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/5f54aa2c.html">PyQt5使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/82d3b275.html">TensorFlow Object Detection API使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/2a3d46b0.html">C语言中整型提升问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/dece8eba.html">TXT数据转OpenCV中的Mat数据</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/e8b35736.html">OpenCV中滑动条和鼠标事件响应操作的使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/b6fb6109.html">利用回调函数计算函数运行时间</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/df943c4f.html">论如何科学的上网</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/b1e9411b.html">Hexo的SPFK主题修改小记</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/22c3daf1.html">解决Qt中Qlabel显示OpenCV的Mat数据图像产生扭曲现象问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/509ee93b.html">解决OpenCV-2.4.11调用摄像头显示拍摄视频出错问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3bc0decc.html">Hexo添加各种小部件</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/fd0f8195.html">OpenCV中显著性检测算法的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/35132cb7.html">OpenCV中Selective Search算法的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/170c76cc.html">别了，漆黑的象牙塔</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/c3f26b1.html">Win10以树形结构显示文件目录结构</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/68065b99.html">ACGN作品个人印象简评</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/4f6225b7.html">Hexo添加站内本地搜索</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/302a6244.html">用OpenCV显示OpenGL图形</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/7df528b4.html">Win10＋VS2013＋CMake-gui编译和配置OpenCV-3.2.0</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/17017530.html">MyThoughts</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/7d5bc07b.html">解决写上篇文档“Hexo+GitHub搭建个人博客”遇到的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/d7965b48.html">Hexo+GitHub搭建个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/4a17b156.html">Hello World</a></li></ul></div></div></aside></div></div><span id="cursor-trail"></span> <span class="click-halo"></span><footer id="footer" class="text-center"><div class="copyright-info">&copy; 2017 - 2024 <a href="/">Shaun</a></div><span class="site-visitor"><i class="fa fa-user-o" aria-hidden="true"></i> <span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;|&nbsp; <i class="fa fa-eye" aria-hidden="true"></i> <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;|&nbsp; <i class="fa fa-hand-o-up" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span></span><div class="site-info"><a href="http://hexo.io/" target="_blank">Hexo </a>theme <a href="https://github.com/cniter/hexo-theme-chi" target="_blank">Chi </a>by <a href="https://github.com/cniter" target="_blank">Shaun</a></div></footer><script type="text/javascript" async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" integrity="sha256-WUED7NFzpsmHtLO7bswSz4JSfkhE+cD4ncKeOznwFSY=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }

        , TeX: {
            extensions: ["extpfeil.js"]
        }
    });
    
    MathJax.Hub.Queue(function() {
        let all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';                 
        }       
    });</script><script type="text/javascript">const MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,config={attributes:!0,childList:!0,characterData:!0};let target=document.querySelector("#local-search--result"),$local_search_result=$("#local-search--result"),$no_result=$(".no-result"),observer=new MutationObserver((function(e){e.forEach((function(e){$local_search_result.text()||""==$local_search_result.html()?$no_result.hide():$no_result.show(200)}))})),inputArea=document.querySelector("#local-search--input"),getSearchFile=function(){let e="search.xml";0==e.length&&(e="search.xml"),searchFunc("/"+e,"local-search--input","local-search--result"),observer.observe(target,config)};inputArea.onfocus=function(){getSearchFile()};let $resetButton=$("#search-form .fa-times"),$resultArea=$("#local-search--result");inputArea.oninput=function(){$resetButton.show()};let resetSearch=function(){$resultArea.html(""),document.querySelector("#search-form").reset(),$resetButton.hide(),$no_result.hide(),observer.disconnect()};inputArea.onkeydown=function(e){if(13==e.keyCode)return!1};let searchFunc=function(e,t,r){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){let n=$("entry",e).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get(),l=document.getElementById(t),s=document.getElementById(r);l.addEventListener("input",(function(){let e='<ul class="search-result--list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length<=0||(n.forEach((function(r){let n=!0,l=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),c=r.url,o=-1,a=-1,u=-1;if(""!=l&&""!=s&&t.forEach((function(e,t){o=l.indexOf(e),a=s.indexOf(e),o<0&&a<0?n=!1:(a<0&&(a=0),0==t&&(u=a))})),n){e+="<li><a href='"+c+"' class='search-result--title' target='_blank'>> "+l+"</a>";let n=r.content.trim().replace(/<[^>]+>/g,"");if(u>=0){let r=u-6,l=u+6;r<0&&(r=0),0==r&&(l=10),l>n.length&&(l=n.length);let s=n.substr(r,l);t.forEach((function(e){let t=new RegExp(e,"gi");s=s.replace(t,'<em class="search-keyword">'+e+"</em>")})),e+='<p class="search-result">'+s+"...</p>"}}})),s.innerHTML=e)}))}})}</script><script type="module" src="/js/main.js"></script><script>$(document).ready((function(){$("del").attr("title","你知道的太多了ヾ(▼ﾍ▼；) (#｀皿´メ)"),$(".toc-card").width($("#right-col").width()),$("a.footnote-ref").each((function(t,e){let i=$(this).parents("article").attr("id"),o=$(this).attr("href");e.setAttribute("data-toggle","tooltip"),e.setAttribute("data-html","true"),e.setAttribute("title",$("#"+i+" "+o).html())}))})),$(window).on("load",(function(){$("#sidebar-sticky--bottom").height($("#right-col").height()-$("#sidebar").height()-$("#footer").height())})),$((function(){$("[data-toggle='tooltip']").tooltip()}))</script></body></html>