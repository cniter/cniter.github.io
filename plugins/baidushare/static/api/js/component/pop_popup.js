window._bd_share_main.F.module("component/pop_popup",function(e,o){var s,r,d,u=e("base/tangram").T,t=e("base/class").Class,e=(e("conf/const"),e("component/pop_base")),e=t.create(function(){var p=this;p._poptype=1,p._hide=function(){r&&r.hide(),s&&s.hide()},p._show=function(e,o){var t,i,n;p._container,i=(t=o).bdMini||2,t=o.bdMiniList||p._partnerSort.slice(0,8*i),n=[],u.each(t,function(e,o){n[e]='<li><a href="#" onclick="return false;" class="popup_'+o+'" data-cmd="'+o+'">'+p._partners[o].name+"</a></li>"}),d.html(n.join("")),s.width(110*i+6),r.height(s.outerHeight()),r.width(s.outerWidth());var a=p._getPosition(e.element,o);u.each([s,r],function(e,o){o.css({top:a.top,left:a.left}).show()}),u(e.element).one("mouseout",function(){var e=!1;s.one("mouseover",function(){e=!0}),setTimeout(function(){e||p.hide()},300)})},p._getPosition=function(e,o){var t=u(e).offset(),i=t.top+u(e).height()+5,n=t.left,a=s.outerHeight(),e=u(window).scrollTop();(i+a>u("body").height()&&i+a>u(window).height()||i+a>e+u(window).height())&&(i=(i=t.top-a-5)<e?e:i);e=o.bdPopupOffsetLeft,o=o.bdPopupOffsetTop;return(e||o)&&(i+=0|o,n+=0|e),{top:i,left:n}},p._init=function(){var e="bdSharePopup_"+ +new Date,o=['<iframe frameborder="0" id="'+e+'bg" class="bdshare_popup_bg" style="display:none;"></iframe>'].join(""),t=['<div class="bdshare_popup_box" id="'+e+'box" style="display:none;">','<div class="bdshare_popup_top">',"分享到","</div>",'<ul class="bdshare_popup_list"></ul>','<div class="bdshare_popup_bottom">','<a href="#" onclick="return false;" class="popup_more"  data-cmd="more" target="_blank;">更多...</a>',"</div>","</div>"].join("");u("body").insertHTML("beforeEnd",o+t),p._container=s=u("#"+e+"box"),d=s.find(".bdshare_popup_list"),r=u("#"+e+"bg"),s.mouseleave(p.hide)}},e.PopBase);o.Popup=((e=new e).init(),e)});