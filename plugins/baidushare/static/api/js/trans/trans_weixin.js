window._bd_share_main.F.module("trans/trans_weixin",function(n,i){function o(){var n=u(window).scrollTop(),i=d.outerWidth(),e=d.outerHeight(),o=u(window).width(),n=(n=(u(window).height()-e)/2+n)<0?0:n,o=(o=(o-i)/2)<0?0:o;t.width(i).height(e).css({left:o,top:n}),d.css({left:o,top:n})}function e(){d.hide(),t.hide()}var d,t,a,r="bdshare_weixin_qrcode_dialog",p="",c=0,s={},u=n("base/tangram").T,_=(n("conf/const").URLS,function(n){var e,o=Math.round(200/n.length),d=['<table style="direction:ltr;border: 0; width:'+(c=(o=o<2?2:o)*n.length)+'px; border-collapse: collapse;background-color:#fff;margin:0 auto;" align="center">'];return u.each(n,function(n,i){d.push("<tr>"),u.each(i,function(n,i){e='<td style="width:'+o+"px;height:"+o+"px;padding:0;margin:0;border:none;background:#"+(i?"000":"FFF")+'"></td>',d.push(e)})}),d.push("</table>"),d.join("")}),h=function(e,n){window._bd_share_main.F.use("component/qrcode",function(n){var i=new n.QRCode(-1,n.QRErrorCorrectLevel.L);i.addData(e),i.make();var n=_(i.modules);u(n).appendTo(a.empty()),n=(220<(i=c)?i:220)+20,i=u(".bd_weixin_popup_foot").height()+u(".bd_weixin_popup_head").height()+i+30,d.css({width:n,height:i}),o(),d.attr("data-url",e)})},f=function(){d.find(".bd_weixin_popup_close").click(e),u("body").on("keydown",function(n){27==n.keyCode&&e()}),u(window).resize(function(){o()})},l=function(){d.show(),t.show(),o()},w=function(n){var i="10006-weixin-1-52626-6b3bffd01fdde4900130bc5a2751b6d1";if("off"===s.sign)return n;if("normal"!==s.sign)return n.replace(/#.*$/g,"")+"#"+i;var e=n.indexOf("#"),o=n.indexOf("?");return-1==e?n+(-1==o?"?":"&")+i:n.replace("#",(-1==o?"?":"&")+i+"#")};i.run=function(n){p=function(n){n=w(n);var e=[];return u.each(n,function(n,i){/[^\x00-\xff]/.test(i)?e[n]=encodeURI(i):e[n]=i}),e.join("")}((s=n).url),window._bd_share_main.F.use("weixin_popup.css",function(){var n,i;window._bd_share_main.F.use("component/pop_dialog",function(n){n.Dialog.hide()}),d=u("#"+r),t=u("#"+r+"_bg"),d.length<1&&(n='<iframe id="'+r+'_bg" class="bd_weixin_popup_bg"></iframe>',i=['<div id="'+r+'" class="bd_weixin_popup">','<div class="bd_weixin_popup_head">',"<span>分享到微信朋友圈</span>",'<a href="#" onclick="return false;" class="bd_weixin_popup_close">&times;</a>',"</div>",'<div id="'+r+'_qr" class="bd_weixin_popup_main"></div>','<div class="bd_weixin_popup_foot">打开微信，点击底部的“发现”，<br>使用“扫一扫”即可将网页分享至朋友圈。</div>',"</div>"].join(""),t=u(n).appendTo("body"),d=u(i).appendTo("body"),f()),a=d.find("#"+r+"_qr"),l(),d.attr("data-url")!=p&&(a.html("正在加载"),h((p.length,p)))})}});